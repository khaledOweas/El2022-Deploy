"use strict";(self.webpackChunkEKOWebUI=self.webpackChunkEKOWebUI||[]).push([[287],{287:(nt,j,u)=>{u.r(j),u.d(j,{AuthModule:()=>Qe});var c=u(177),s=u(9417),C=u(1626),m=u(8742),g=u(6354),b=u(5312),e=u(4438);let P=(()=>{class t{constructor(o){this.http=o}getServers(){return this.http.get(b.c.EKOSettingsUrl).pipe((0,g.T)(o=>o.Servers.map(r=>{const n=new U;return n.name=r.name,n.id=r.id,n.describe=r.describe,n.url=r.url,n.SecretLabId=r.SecretLabId,n.signalR=r.signalR,n})))}static#e=this.\u0275fac=function(r){return new(r||t)(e.KVO(C.Qq))};static#t=this.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class U{}var h=u(7089),O=u(3727),R=u(2450),k=u(5769),$=u(5779);const Y=t=>({"background-image":t}),N=(t,a)=>({"btn-info":t,"btn-warning":a}),B=()=>({standalone:!0});function V(t,a){if(1&t&&(e.j41(0,"div",20)(1,"div"),e.EFF(2),e.k0s(),e.j41(3,"div"),e.EFF(4),e.k0s()()),2&t){const o=e.XpG(3);e.R7$(2),e.SpI(" \u062a\u0645 \u0625\u062e\u062a\u064a\u0627\u0631 ",o.SelectedServer.describe," "),e.R7$(2),e.SpI(" ",o.SelectedServer.name," ")}}function q(t,a){if(1&t&&e.DNE(0,V,5,2,"div",19),2&t){const o=e.XpG(2);e.Y8G("ngIf",o.SelectedServer)}}function X(t,a){if(1&t&&(e.j41(0,"div",20)(1,"div"),e.EFF(2),e.k0s(),e.j41(3,"div",21),e.EFF(4),e.k0s()()),2&t){const o=a.$implicit;e.R7$(2),e.SpI(" ",o.describe," "),e.R7$(2),e.Lme(" ",o.name," -- ",o.SecretLabId," ")}}function H(t,a){if(1&t){const o=e.RV6();e.j41(0,"div",22)(1,"button",23),e.bIt("click",function(){e.eBV(o);const n=e.XpG(2);return e.Njj(n.SaveData())}),e.j41(2,"span",24),e.EFF(3," \u062d\u0641\u0638 "),e.k0s()()()}}function J(t,a){if(1&t){const o=e.RV6();e.j41(0,"div",11)(1,"div",12)(2,"label",13),e.EFF(3,"\u0627\u062e\u062a\u0631 \u0627\u0644\u062e\u0640\u0627\u062f\u0645"),e.k0s(),e.j41(4,"p-dropdown",14),e.bIt("onChange",function(){e.eBV(o);const n=e.XpG();return e.Njj(n.ChangeServer())}),e.mxI("ngModelChange",function(n){e.eBV(o);const i=e.XpG();return e.DH7(i.SelectedServer,n)||(i.SelectedServer=n),e.Njj(n)}),e.DNE(5,q,1,1,"ng-template",15)(6,X,5,3,"ng-template",16),e.k0s()(),e.j41(7,"div",12)(8,"label",13),e.EFF(9," \u0631\u0627\u0628\u0637 \u0627\u0644\u062e\u0627\u062f\u0645 "),e.k0s(),e.j41(10,"input",17),e.mxI("ngModelChange",function(n){e.eBV(o);const i=e.XpG();return e.DH7(i.url0,n)||(i.url0=n),e.Njj(n)}),e.k0s()(),e.j41(11,"div",12)(12,"label",13),e.EFF(13," \u0643\u0648\u062f \u0627\u0644\u0645\u0639\u0645\u0644 "),e.k0s(),e.j41(14,"input",17),e.mxI("ngModelChange",function(n){e.eBV(o);const i=e.XpG();return e.DH7(i.labid0,n)||(i.labid0=n),e.Njj(n)}),e.k0s()(),e.j41(15,"div",12)(16,"label",13),e.EFF(17," \u0631\u0627\u0628\u0637 \u0627\u0644\u0627\u062a\u0635\u0627\u0644 "),e.k0s(),e.j41(18,"input",17),e.mxI("ngModelChange",function(n){e.eBV(o);const i=e.XpG();return e.DH7(i.signlaRUrl0,n)||(i.signlaRUrl0=n),e.Njj(n)}),e.k0s()(),e.DNE(19,H,4,0,"div",18),e.k0s()}if(2&t){const o=e.XpG();e.R7$(4),e.Y8G("options",o.ListOfServers)("ngModelOptions",e.lJ4(10,B)),e.R50("ngModel",o.SelectedServer),e.R7$(6),e.R50("ngModel",o.url0),e.Y8G("disabled","Other"!=o.SelectedServer.name),e.R7$(4),e.R50("ngModel",o.labid0),e.Y8G("disabled","Other"!=o.SelectedServer.name),e.R7$(4),e.R50("ngModel",o.signlaRUrl0),e.Y8G("disabled","Other"!=o.SelectedServer.name),e.R7$(),e.Y8G("ngIf","Other"==o.SelectedServer.name)}}let K=(()=>{class t{constructor(o,r,n,i){this.cdRef=o,this.apiUrlServiceService=r,this.cts=n,this.settingsService=i,this.today=new Date,this.backgroundImage="assets/media/bgs/1.png",this.SelectedServer={},this.showAdvancedData=!1,this.OtherServerUrl="",this.url="",this.labid="",this.signlaRUrl="",this.url0="",this.labid0="",this.signlaRUrl0=""}isLocalhost(o){return o.includes("localhost")}ngOnInit(){this.ListOfServers=h.tM,this.loadServersSettings(),this.bindInputsFromLocal(),this.bindTextFromLocal(),document.body.classList.add("bg-white"),setInterval(()=>{let o=Math.floor(11*Math.random())+1;this.backgroundImage="assets/media/bgs/"+o.toString()+".png",this.cdRef.detectChanges()},9e3)}loadServersSettings(){this.settingsService.getServers().subscribe({next:o=>{if(this.ListOfServers=o,this.isLocalhost(window.location.href)){let r=new U;r.name="DevMode",r.id=this.ListOfServers.length,r.url="https://localhost:7108",r.describe="Dev-Mode-Khaled-Only",r.SecretLabId="el01Core",r.signalR="https://localhost:7108/authHub",this.ListOfServers.push(r)}this.handleServersAndCurentServer()}})}handleServersAndCurentServer(){var o=this.apiUrlServiceService.getApiUrl(),r=this.apiUrlServiceService.getSecretLabId(),n=this.apiUrlServiceService.getSignalRUrl(),i=this.ListOfServers.filter(l=>l.url==o&&l.signalR==n&&l.SecretLabId==r);this.SelectedServer=i.length?i[0]:this.ListOfServers.filter(l=>"Other"==l.name)[0]}ngOnDestroy(){document.body.classList.remove("bg-white")}toggleAdvancedData(){this.showAdvancedData=!this.showAdvancedData,this.loadServersSettings()}ChangeServer(){this.SelectedServer&&(this.apiUrlServiceService.setApiUrl(this.ListOfServers[this.SelectedServer.id].url),this.apiUrlServiceService.setSecretLabId(this.ListOfServers[this.SelectedServer.id].SecretLabId),this.apiUrlServiceService.setSignalRUrl(this.ListOfServers[this.SelectedServer.id].signalR)),this.BindValues(),"Other"!=this.SelectedServer.name?this.bindInputsFromLocal():(this.url0="https://",this.labid0="",this.signlaRUrl0="https://")}SaveData(){"Other"==this.SelectedServer.name&&(this.apiUrlServiceService.setApiUrl(this.url0),this.apiUrlServiceService.setSecretLabId(this.labid0),this.apiUrlServiceService.setSignalRUrl(this.signlaRUrl0),this.cts.sendTosterWithoutLog("success","\u0627\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u062e\u0627\u062f\u0645",`${this.apiUrlServiceService.getApiUrl()} - ${this.apiUrlServiceService.getSecretLabId()} - ${this.apiUrlServiceService.getSignalRUrl()}`,"")),this.bindTextFromLocal()}BindValues(){this.bindTextFromLocal(),"Other"!=this.SelectedServer.name&&this.cts.sendTosterWithoutLog("info","\u0627\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u062e\u0627\u062f\u0645",`${this.apiUrlServiceService.getApiUrl()} - ${this.apiUrlServiceService.getSecretLabId()} - ${this.apiUrlServiceService.getSignalRUrl()}`,"")}bindTextFromLocal(){this.url=this.apiUrlServiceService.getApiUrl()||"",this.labid=this.apiUrlServiceService.getSecretLabId()||"",this.signlaRUrl=this.apiUrlServiceService.getSignalRUrl()||""}bindInputsFromLocal(){this.url0=this.apiUrlServiceService.getApiUrl()||"",this.labid0=this.apiUrlServiceService.getSecretLabId()||"",this.signlaRUrl0=this.apiUrlServiceService.getSignalRUrl()||""}static#e=this.\u0275fac=function(r){return new(r||t)(e.rXU(e.gRc),e.rXU(O.Y),e.rXU(R.o),e.rXU(P))};static#t=this.\u0275cmp=e.VBU({type:t,selectors:[["app-auth"]],decls:20,vars:11,consts:[["id","loginBackGround",1,"d-flex","flex-column","flex-column-fluid","bgi-position-y-bottom","bgi-no-repeat","bgi-size-contain","bgi-attachment-fixed",2,"background-size","cover","height","100% !important","position","absolute","width","100%",3,"ngStyle"],[1,"d-flex","flex-center","flex-column","flex-column-fluid","p-5","pb-lg-20"],[1,"d-flex","align-items-start"],[1,"w-lg-500px","bg-white","rounded","shadow-sm","p-5","p-lg-15","MobCard","m-5"],["class","w-lg-500px bg-white rounded shadow-sm p-5 p-lg-15   MobCard advanced-data ml-3 m-5",4,"ngIf"],["type","button",1,"btn","mt-3",3,"click","ngClass"],[2,"text-align","center","color","lightgray","position","absolute","bottom","17px","left","7px"],[2,"text-align","center","color","lightgray","position","absolute","bottom","3px","left","7px"],[1,"d-flex","flex-center","flex-column-auto"],[1,"d-flex","align-items-center","fw-bold","fs-6"],[1,"text-muted","text-hover-primary","px-2","cursor-pointer"],[1,"w-lg-500px","bg-white","rounded","shadow-sm","p-5","p-lg-15","MobCard","advanced-data","ml-3","m-5"],[1,"fv-row","mb-10"],[1,"form-label","fs-6","fw-bolder","text-dark"],["styleClass","taj-font fc-primng","placeholder","\u0627\u062e\u062a\u0631 \u0627\u0644\u062e\u0627\u062f\u0645","optionLabel","name",3,"onChange","ngModelChange","options","ngModelOptions","ngModel"],["pTemplate","selectedItem"],["pTemplate","item"],[1,"form-control",2,"direction","ltr",3,"ngModelChange","ngModel","disabled"],["class","text-center",4,"ngIf"],["class","flex align-items-center gap-2",4,"ngIf"],[1,"flex","align-items-center","gap-2"],[2,"color","rgba(143, 143, 143, 0.486)"],[1,"text-center"],[1,"btn","btn-lg","btn-success","w-100","mb-5",3,"click"],[1,"indicator-label"]],template:function(r,n){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.nrm(4,"router-outlet"),e.k0s(),e.DNE(5,J,20,11,"div",4),e.k0s(),e.j41(6,"button",5),e.bIt("click",function(){return n.toggleAdvancedData()}),e.EFF(7," \u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0645\u062a\u0642\u062f\u0645\u0629"),e.k0s()(),e.j41(8,"div",6),e.EFF(9),e.k0s(),e.j41(10,"div",7),e.EFF(11),e.k0s(),e.j41(12,"div",8)(13,"div",9)(14,"a",10),e.EFF(15,"\u0639\u0646 \u0627\u0644\u0645\u0639\u0645\u0644"),e.k0s(),e.j41(16,"a",10),e.EFF(17,"\u062a\u0648\u0627\u0635\u0644 \u0645\u0639\u0646\u0627 "),e.k0s(),e.j41(18,"a",10),e.EFF(19,"\u0627\u0644\u0645\u0648\u0642\u0639 \u0627\u0644\u0627\u0644\u0643\u062a\u0631\u0648\u0646\u064a"),e.k0s()()()()),2&r&&(e.Y8G("ngStyle",e.eq3(6,Y,"url("+n.backgroundImage+")")),e.R7$(5),e.Y8G("ngIf",n.showAdvancedData),e.R7$(),e.Y8G("ngClass",e.l_i(8,N,n.showAdvancedData,0==n.showAdvancedData)),e.R7$(3),e.Lme(" API:",n.url," - ID: ",n.labid," "),e.R7$(2),e.SpI(" SignalR : ",n.signlaRUrl," "))},dependencies:[c.YU,c.bT,c.B3,k.ms,$.Ei,m.n3,s.me,s.BC,s.vS],styles:["[_nghost-%COMP%]{height:100%}"]})}return t})();var A=u(1594),T=u(5487),W=u(8032),z=u.n(W),f=u(5161),I=u(7586),Q=u(9949),L=u(4412),v=u(7673),Z=u(5558),x=u(9437),S=u(980);class y{setAuth(a){this.authToken=a.authToken,this.refreshToken=a.refreshToken,this.expiresIn=a.expiresIn}}const D=`${localStorage.getItem("apiUrl")||""}/users`;let ee=(()=>{class t{constructor(o){this.http=o}login(o,r){const n=new Error("Not Found");return o&&r?this.getAllUsers().pipe((0,g.T)(i=>{if(i.length<=0)return n;const l=i.find(w=>w.email.toLowerCase()===o.toLowerCase()&&w.password===r);if(!l)return n;const d=new y;return d.authToken=l.authToken,d.refreshToken=l.refreshToken,d.expiresIn=new Date(Date.now()+864e7),d})):(0,v.of)(n)}createUser(o){return o.roles=[2],o.authToken="auth-token-"+Math.random(),o.refreshToken="auth-token-"+Math.random(),o.expiresIn=new Date(Date.now()+864e7),o.pic="./assets/media/avatars/150-2.jpg",this.http.post(D,o)}forgotPassword(o){return this.getAllUsers().pipe((0,g.T)(r=>void 0!==r.find(i=>i.email.toLowerCase()===o.toLowerCase())))}getUserByToken(o){return(0,v.of)(void 0)}getAllUsers(){return this.http.get(D)}static#e=this.\u0275fac=function(r){return new(r||t)(e.KVO(C.Qq))};static#t=this.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),_=(()=>{class t{get currentUserValue(){return this.currentUserSubject.value}set currentUserValue(o){this.currentUserSubject.next(o)}constructor(o,r,n){this.authHttpService=o,this.service=r,this.router=n,this.unsubscribe=[],this.authLocalStorageToken=`${localStorage.getItem("apiUrl")||""}-${localStorage.getItem("apiUrl")||""}`,this.isLoadingSubject=new L.t(!1),this.currentUserSubject=new L.t(void 0),this.currentUser$=this.currentUserSubject.asObservable(),this.isLoading$=this.isLoadingSubject.asObservable();const i=this.getUserByToken().subscribe();this.unsubscribe.push(i)}login(o){return this.service.authenticate(o).pipe((0,g.T)(r=>{if("Error_Domain"!=r.token)return this.setAuthFromLocalStorage(r);document.getElementById("kt_sign_in_submit")?.removeAttribute("data-kt-indicator")}),(0,Z.n)(()=>this.getUserByToken()),(0,x.W)(r=>(console.error("err",r),(0,v.of)(void 0))),(0,S.j)(()=>this.isLoadingSubject.next(!1)))}logout(){localStorage.removeItem(this.authLocalStorageToken),this.router.navigate(["/auth/login"],{queryParams:{}})}getUserByToken(){const o=this.getAuthFromLocalStorage();return o&&o.authToken?(this.isLoadingSubject.next(!0),this.authHttpService.getUserByToken(o.authToken).pipe((0,g.T)(r=>(r?this.currentUserSubject.next(r):this.logout(),r)),(0,S.j)(()=>this.isLoadingSubject.next(!1)))):(0,v.of)(void 0)}registration(o){return this.isLoadingSubject.next(!0),this.authHttpService.createUser(o).pipe((0,g.T)(()=>{this.isLoadingSubject.next(!1)}),(0,x.W)(r=>(console.error("err",r),(0,v.of)(void 0))),(0,S.j)(()=>this.isLoadingSubject.next(!1)))}forgotPassword(o){return this.isLoadingSubject.next(!0),this.authHttpService.forgotPassword(o).pipe((0,S.j)(()=>this.isLoadingSubject.next(!1)))}setAuthFromLocalStorage(o){return!(!o||!o.token||(localStorage.setItem(this.authLocalStorageToken,JSON.stringify(o)),0))}getAuthFromLocalStorage(){try{const o=localStorage.getItem(this.authLocalStorageToken);return o?JSON.parse(o):void 0}catch(o){return void console.error(o)}}ngOnDestroy(){this.unsubscribe.forEach(o=>o.unsubscribe())}static#e=this.\u0275fac=function(r){return new(r||t)(e.KVO(ee),e.KVO(T.Kje),e.KVO(m.Ix))};static#t=this.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var te=u(7612),oe=u(3798),ne=u(9740);const M=(t,a)=>({"is-invalid":t,"is-valid":a}),re=t=>({validation:"required",message:"\u0625\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0645\u0637\u0644\u0648\u0628",control:t}),ie=t=>({validation:"username",message:"\u062e\u0637\u0623 \u0641\u064a \u0625\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645",control:t}),se=t=>({validation:"minLength",message:"\u0625\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0646 \u064a\u0643\u0648\u0646 \u0627\u0642\u0644 \u0645\u0646 3 \u062d\u0631\u0648\u0641 ",control:t}),ae=t=>({validation:"maxLength",message:"\u0625\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0646 \u064a\u0643\u0648\u0646 \u0627\u0643\u062b\u0631 \u0645\u0646 300 \u062d\u0631\u0641 ",control:t}),ue=t=>({validation:"required",message:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0645\u0637\u0644\u0648\u0628\u0629 ",control:t}),le=t=>({validation:"minlength",message:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u064a\u062c\u0628 \u0627\u0646\u062a \u062a\u0643\u0648\u0646 \u0639\u0644\u064a \u0627\u0644\u0627\u0642\u0644 3 \u062d\u0631\u0648\u0641 ",control:t}),ce=t=>({validation:"maxLength",message:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0646 \u062a\u0643\u0648\u0646 \u0627\u0643\u062b\u0631 \u0645\u0646 200 \u062d\u0631\u0641",control:t}),G=()=>({standalone:!0});function de(t,a){1&t&&(e.qex(0),e.j41(1,"div",21)(2,"div",22),e.EFF(3," \u062e\u0637\u0623 \u0641\u064a \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062f\u062e\u0648\u0644 "),e.k0s()(),e.bVm())}function me(t,a){if(1&t&&(e.qex(0),e.j41(1,"div",23)(2,"span",24),e.EFF(3),e.k0s()(),e.bVm()),2&t){const o=e.XpG().message;e.R7$(3),e.SpI(" ",o," ")}}function ge(t,a){if(1&t&&e.DNE(0,me,4,1,"ng-container",5),2&t){const o=a.control;e.Y8G("ngIf",o.hasError(a.validation)&&(o.dirty||o.touched))}}let he=(()=>{class t{constructor(o,r,n,i,l,d,w,Ze,et,tt,ot){this.fb=o,this.authService=r,this.service=n,this.tokenService=i,this.localStorageService=l,this.route=d,this.router=w,this.signalRService=Ze,this.apiUrlServiceService=et,this.cdRef=tt,this.cts=ot,this.defaultAuth={email:"Superadmin",password:"P@ssw0rd"},this.unsubscribe=[],this.isLoading$=this.authService.isLoading$,this.authService.currentUserValue&&this.router.navigate(["/Monitors/Home"]),this.branchs=h.hJ,this.drawers=h.Kf,this.SelectedBranch=this.branchs.find(E=>E.id==Number(localStorage.getItem("deviceBranchId")))??h.hJ[0],this.SelectedDrawer=this.drawers.find(E=>E.id==Number(localStorage.getItem("deviceDrawerId")))??h.Kf[0],this.onChangeBranch()}ngOnInit(){this.initForm(),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/Monitors/Home"}get f(){return this.loginForm.controls}initForm(){var o=this.apiUrlServiceService.getSecretLabId();this.loginForm=this.fb.group({username:[b.c.production?"":this.defaultAuth.email,s.k0.compose([s.k0.required,s.k0.minLength(3),s.k0.maxLength(320)])],password:[b.c.production?"":this.defaultAuth.password,s.k0.compose([s.k0.required,s.k0.minLength(2),s.k0.maxLength(50)])],labid:new s.MJ(o),lang:new s.MJ("ar"),isDesktop:new s.MJ(!1),clientDateTime:Q._.Now()})}submit(){document.getElementById("kt_sign_in_submit")?.setAttribute("data-kt-indicator","on");let o=T.J3p.fromJS(this.loginForm.value);o.labid=this.apiUrlServiceService.getSecretLabId(),this.router.navigate([this.returnUrl]),this.hasError=!1,this.service.authenticate(o).pipe((0,A.$)()).subscribe({next:n=>{if(n)if(!n.isSuccess||n.isSuccess&&null==n.loginAddons)"Please Login from Desktop First"==n.token?(this.cts.sendToster("success","\u0645\u062d\u0627\u0648\u0644\u0629 \u062a\u0633\u062c\u064a\u0644 \u062f\u062e\u0648\u0644","\u064a\u062c\u0628 \u0641\u062a\u062d \u0628\u0631\u0646\u0627\u0645\u062c \u0627\u0644\u0645\u0639\u0645\u0644",""),z().fire({title:"\u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u062f\u062e\u0648\u0644 \u0644\u0644\u0646\u0638\u0627\u0645 \u0628\u062f\u0648\u0646 \u0627\u0644\u0625\u062a\u0635\u0627\u0644 \u0628\u062c\u0647\u0627\u0632 \u0643\u0645\u0628\u064a\u0648\u062a\u0631",text:"\u064a\u062c\u0628 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644 \u0645\u0646 \u0628\u0631\u0646\u0627\u0645\u062c \u0627\u0644\u0645\u0639\u0645\u0644 \u0623\u0648\u0644\u0627  .. \u0627\u0630\u0627 \u0644\u0645 \u064a\u0643\u0646 \u0644\u062f\u064a\u0643 \u0628\u0631\u0646\u0627\u0645\u062c \u0642\u0645 \u0628\u0627\u0644\u0636\u063a\u0638 \u0639\u0644\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644 ",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\u0627\u0644\u062a\u0640\u062d\u0640\u0645\u0640\u064a\u0640\u0644 ",cancelButtonText:"\u0625\u063a\u0640\u0640\u0644\u0627\u0642",showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"}}).then(i=>{i.isConfirmed&&window.open(b.c.updatedDesktopVersion,"_blank")})):(document.getElementById("kt_sign_in_submit")?.setAttribute("data-kt-indicator","off"),this.cts.sendToster("error","\u062a\u0633\u062c\u064a\u0644 \u062f\u062e\u0648\u0644","\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644",""),this.hasError=!0,this.cdRef.detectChanges()),document.getElementById("kt_sign_in_submit")?.removeAttribute("data-kt-indicator"),this.cdRef.detectChanges();else{this.tokenService.setToken(n.token),this.localStorageService.set("oldToken",n.token),this.localStorageService.set("jwtToken",n.token),this.localStorageService.set("userId",this.tokenService.getUserId()),this.localStorageService.set("userName",this.tokenService.getUserName()),this.localStorageService.set("userNameAR",this.tokenService.getUserArabicName()),this.localStorageService.set("userRoles",this.tokenService.getUserRoles()),this.localStorageService.set("loginTime",I(I(new Date).toDate()).format("YYYY-MM-DD HH:mm:ss")),this.localStorageService.set("secretLabId",this.tokenService.getSecretLabId()),this.localStorageService.set("DesktopConnectionId",this.tokenService.getDescktopConnection()),this.localStorageService.set("firstTimeAfterlogin","yes"),this.cts.sendToster("success","\u062a\u0633\u062c\u064a\u0644 \u062f\u062e\u0648\u0644","\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644 \u0628\u0646\u062c\u0627\u062d","");let i=new f.q;i.SetUserAppSettings(null!=n.loginAddons?.userAppSettings?f.oH.fromJS(JSON.parse(n.loginAddons?.userAppSettings)):new f.oH);let l=i.GetUserAppSettings();l.CurrentBranchId=this.SelectedBranch.id,l.CurrentDrawerId=this.SelectedDrawer.id,i.SetUserAppSettings(l),this.localStorageService.set("deviceBranchId",this.SelectedBranch.id),this.localStorageService.set("deviceDrawerId",this.SelectedDrawer.id),i.SetWhatsAppTemplates(null!=n.loginAddons?.whatsAppTemplates?f.ar.fromJS(JSON.parse(n.loginAddons?.whatsAppTemplates)):new f.ar),null!=n.loginAddons?.totalDailyVisitCounts?localStorage.setItem("dailyvisitCount",String(n.loginAddons?.totalDailyVisitCounts)):localStorage.setItem("dailyvisitCount","0"),document.getElementById("kt_sign_in_submit")?.removeAttribute("data-kt-indicator"),this.signalRService.checkConnection(),this.router.navigate(["/Monitors/Home"]),this.cdRef.detectChanges()}else this.hasError=!0,document.getElementById("kt_sign_in_submit")?.setAttribute("data-kt-indicator","off"),this.cts.sendTosterWithoutLog("error","\u062a\u0633\u062c\u064a\u0644 \u062f\u062e\u0648\u0644","\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644",""),this.cdRef.detectChanges()},error:n=>{this.cts.sendTosterWithoutLog("error","\u062a\u0633\u062c\u064a\u0644 \u062f\u062e\u0648\u0644","\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644",""),document.getElementById("kt_sign_in_submit")?.setAttribute("data-kt-indicator","off")}}),this.cdRef.detectChanges()}ngOnDestroy(){this.unsubscribe.forEach(o=>o.unsubscribe())}onChangeBranch(){this.drawers=h.Kf.filter(o=>o.branchId==this.SelectedBranch.id),this.drawers.length>=1&&(this.SelectedDrawer=this.drawers.find(o=>o.id==Number(localStorage.getItem("deviceDrawerId")))??this.drawers[0])}static#e=this.\u0275fac=function(r){return new(r||t)(e.rXU(s.ok),e.rXU(_),e.rXU(T.Kje),e.rXU(te.f),e.rXU(oe.s),e.rXU(m.nX),e.rXU(m.Ix),e.rXU(ne.C),e.rXU(O.Y),e.rXU(e.gRc),e.rXU(R.o))};static#t=this.\u0275cmp=e.VBU({type:t,selectors:[["app-login"]],decls:40,vars:47,consts:[["formError",""],["novalidate","novalidate","id","kt_login_signin_form",1,"form","w-100",3,"ngSubmit","formGroup"],[1,"text-center","mb-10"],[1,"text-dark","mb-3"],[1,"text-gray-400","fw-bold","fs-4"],[4,"ngIf"],[1,"fv-row","mb-10"],[1,"form-label","fs-6","fw-bolder","text-dark"],["type","text","name","username","formControlName","username","autocomplete","off",1,"form-control","form-control-lg","form-control-solid",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"d-flex","justify-content-between","mt-n5"],[1,"d-flex","flex-stack","mb-2"],[1,"form-label","fw-bolder","text-dark","fs-6","mb-0"],["type","password","name","password","autocomplete","off","formControlName","password",1,"form-control","form-control-lg","form-control-solid",3,"ngClass"],["styleClass","taj-font fc-primng","placeholder","\u0627\u062e\u062a\u0631 \u0627\u0644\u0641\u0631\u0639","optionLabel","name",3,"onChange","ngModelChange","options","ngModelOptions","ngModel"],["styleClass","taj-font fc-primng","placeholder","\u0627\u062e\u062a\u0631 \u0627\u0644\u062f\u0631\u062c","optionLabel","name",3,"ngModelChange","options","ngModelOptions","ngModel"],[1,"text-center"],["type","submit","id","kt_sign_in_submit",1,"btn","btn-lg","btn-primary","w-100","mb-5",3,"disabled"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[1,"mb-lg-15","alert","alert-danger"],[1,"alert-text","font-weight-bold"],[1,"fv-plugins-message-container"],["role","alert"]],template:function(r,n){if(1&r){const i=e.RV6();e.j41(0,"form",1),e.bIt("ngSubmit",function(){return e.eBV(i),e.Njj(n.submit())}),e.j41(1,"div",2)(2,"h1",3),e.EFF(3," \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644 \u0641\u064a \u0627\u0644\u0646\u0638\u0627\u0645 "),e.k0s(),e.nrm(4,"div",4),e.k0s(),e.DNE(5,de,4,0,"ng-container",5),e.j41(6,"div",6)(7,"label",7),e.EFF(8,"\u0625\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),e.k0s(),e.nrm(9,"input",8),e.eu8(10,9)(11,9)(12,9)(13,9),e.k0s(),e.j41(14,"div",6)(15,"div",10)(16,"div",11)(17,"label",12),e.EFF(18," \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 "),e.k0s()()(),e.nrm(19,"input",13),e.eu8(20,9)(21,9)(22,9),e.k0s(),e.j41(23,"div",6)(24,"label",7),e.EFF(25,"\u0627\u062e\u062a\u0631 \u0627\u0644\u0641\u0631\u0639"),e.k0s(),e.j41(26,"p-dropdown",14),e.bIt("onChange",function(){return e.eBV(i),e.Njj(n.onChangeBranch())}),e.mxI("ngModelChange",function(d){return e.eBV(i),e.DH7(n.SelectedBranch,d)||(n.SelectedBranch=d),e.Njj(d)}),e.k0s()(),e.j41(27,"div",6)(28,"label",7),e.EFF(29,"\u0627\u062e\u062a\u0631 \u0627\u0644\u062f\u0631\u062c"),e.k0s(),e.j41(30,"p-dropdown",15),e.mxI("ngModelChange",function(d){return e.eBV(i),e.DH7(n.SelectedDrawer,d)||(n.SelectedDrawer=d),e.Njj(d)}),e.k0s()(),e.j41(31,"div",16)(32,"button",17)(33,"span",18),e.EFF(34," \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644 "),e.k0s(),e.j41(35,"span",19),e.EFF(36," \u0627\u0646\u062a\u0638\u0631 \u0645\u0646 \u0641\u0636\u0644\u0643 .... "),e.nrm(37,"span",20),e.k0s()()()(),e.DNE(38,ge,1,1,"ng-template",null,0,e.C5r)}if(2&r){const i=e.sdS(39);e.Y8G("formGroup",n.loginForm),e.R7$(5),e.Y8G("ngIf",n.hasError),e.R7$(4),e.Y8G("ngClass",e.l_i(25,M,n.loginForm.controls.username.invalid,n.loginForm.controls.username.valid)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(28,re,n.loginForm.controls.username)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(30,ie,n.loginForm.controls.username)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(32,se,n.loginForm.controls.username)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(34,ae,n.loginForm.controls.username)),e.R7$(6),e.Y8G("ngClass",e.l_i(36,M,n.loginForm.controls.password.invalid,n.loginForm.controls.password.valid)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(39,ue,n.loginForm.controls.password)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(41,le,n.loginForm.controls.password)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(43,ce,n.loginForm.controls.password)),e.R7$(4),e.Y8G("options",n.branchs)("ngModelOptions",e.lJ4(45,G)),e.R50("ngModel",n.SelectedBranch),e.R7$(4),e.Y8G("options",n.drawers)("ngModelOptions",e.lJ4(46,G)),e.R50("ngModel",n.SelectedDrawer),e.R7$(2),e.Y8G("disabled",n.loginForm.invalid)}},dependencies:[c.YU,c.bT,c.T3,k.ms,s.qT,s.me,s.BC,s.cb,s.vS,s.j4,s.JD],styles:["[_nghost-%COMP%]{width:100%}@media (min-width: 992px){[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]{width:100%;max-width:450px}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}}"]})}return t})();class pe{static MatchPassword(a){const o=a.get("password")?.value,r=a.get("cPassword")?.value;o!==r&&a.get("cPassword")?.setErrors({ConfirmPassword:!0})}}class fe extends y{constructor(){super(...arguments),this.roles=[]}setUser(a){const o=a;this.id=o.id,this.username=o.username||"",this.password=o.password||"",this.fullname=o.fullname||"",this.email=o.email||"",this.pic=o.pic||"./assets/media/users/default.jpg",this.roles=o.roles||[],this.occupation=o.occupation||"",this.companyName=o.companyName||"",this.phone=o.phone||"",this.address=o.address,this.socialNetworks=o.socialNetworks}}const F=(t,a)=>({"is-invalid":t,"is-valid":a}),ve=t=>({validation:"required",message:"Fullname is required",control:t}),be=t=>({validation:"minlength",message:"Fullname should have at least 3 symbols",control:t}),Se=t=>({validation:"maxLength",message:"Fullname should have maximum 100 symbols",control:t}),_e=t=>({validation:"required",message:"Email is required",control:t}),Fe=t=>({validation:"email",message:"Email is invalid",control:t}),we=t=>({validation:"minlength",message:"Email should have at least 3 symbols",control:t}),Ce=t=>({validation:"maxLength",message:"Email should have maximum 360 symbols",control:t}),ke=t=>({validation:"required",message:"Password is required",control:t}),Ae=t=>({validation:"minlength",message:"Password should have at least 3 symbols",control:t}),Te=t=>({validation:"maxLength",message:"Password should have maximum 100 symbols",control:t}),Ee=t=>({validation:"required",message:"Confirm Password is required",control:t}),je=t=>({validation:"minlength",message:"Confirm Password should have at least 3 symbols",control:t}),Ue=t=>({validation:"maxLength",message:"Confirm Password should have maximum 100 symbols",control:t});function Oe(t,a){1&t&&(e.qex(0),e.j41(1,"div",30)(2,"div",31),e.EFF(3," The registration details are incorrect "),e.k0s()(),e.bVm())}function Re(t,a){1&t&&(e.qex(0),e.j41(1,"div",32)(2,"div",33),e.EFF(3," 'Passsword' and 'Confirm Password' didn't match. "),e.k0s()(),e.bVm())}function Ie(t,a){1&t&&(e.qex(0),e.j41(1,"span",34),e.EFF(2,"Submit"),e.k0s(),e.bVm())}function Le(t,a){1&t&&(e.qex(0),e.j41(1,"span",35),e.EFF(2," Please wait... "),e.nrm(3,"span",36),e.k0s(),e.bVm()),2&t&&(e.R7$(),e.xc7("display","block"))}function xe(t,a){if(1&t&&(e.qex(0),e.j41(1,"div",32)(2,"div",33)(3,"span",37),e.EFF(4),e.k0s()()(),e.bVm()),2&t){const o=e.XpG().message;e.R7$(4),e.SpI(" ",o," ")}}function ye(t,a){if(1&t&&e.DNE(0,xe,5,1,"ng-container",11),2&t){const o=a.control;e.Y8G("ngIf",o.hasError(a.validation)&&(o.dirty||o.touched))}}let De=(()=>{class t{constructor(o,r,n){this.fb=o,this.authService=r,this.router=n,this.unsubscribe=[],this.isLoading$=this.authService.isLoading$,this.authService.currentUserValue&&this.router.navigate(["/"])}ngOnInit(){this.initForm()}get f(){return this.registrationForm.controls}initForm(){this.registrationForm=this.fb.group({fullname:["",s.k0.compose([s.k0.required,s.k0.minLength(3),s.k0.maxLength(100)])],email:["qwe@qwe.qwe",s.k0.compose([s.k0.required,s.k0.email,s.k0.minLength(3),s.k0.maxLength(320)])],password:["",s.k0.compose([s.k0.required,s.k0.minLength(3),s.k0.maxLength(100)])],cPassword:["",s.k0.compose([s.k0.required,s.k0.minLength(3),s.k0.maxLength(100)])],agree:[!1,s.k0.compose([s.k0.required])]},{validator:pe.MatchPassword})}submit(){this.hasError=!1;const o={};Object.keys(this.f).forEach(i=>{o[i]=this.f[i].value});const r=new fe;r.setUser(o);const n=this.authService.registration(r).pipe((0,A.$)()).subscribe(i=>{i?this.router.navigate(["/"]):this.hasError=!0});this.unsubscribe.push(n)}ngOnDestroy(){this.unsubscribe.forEach(o=>o.unsubscribe())}static#e=this.\u0275fac=function(r){return new(r||t)(e.rXU(s.ok),e.rXU(_),e.rXU(m.Ix))};static#t=this.\u0275cmp=e.VBU({type:t,selectors:[["app-registration"]],decls:65,vars:80,consts:[["formError",""],["novalidate","novalidate","id","kt_login_signup_form",1,"form","w-100","fv-plugins-bootstrap5","fv-plugins-framework",3,"ngSubmit","formGroup"],[1,"mb-10","text-center"],[1,"text-dark","mb-3"],[1,"text-gray-400","fw-bold","fs-4"],["routerLink","/auth/login",1,"link-primary","fw-bolder"],["type","button",1,"btn","btn-light-primary","fw-bolder","w-100","mb-10"],["alt","Logo","src","./assets/media/svg/brand-logos/google-icon.svg",1,"h-20px","me-3"],[1,"d-flex","align-items-center","mb-10"],[1,"border-bottom","border-gray-300","mw-50","w-100"],[1,"fw-bold","text-gray-400","fs-7","mx-2"],[4,"ngIf"],[1,"row","fv-row","mb-7"],[1,"form-label","fw-bolder","text-dark","fs-6"],["type","text","name","fullname","formControlName","fullname","placeholder","Fullname","autocomplete","off",1,"form-control","form-control-lg","form-control-solid",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"fv-row","mb-7"],["type","email","placeholder","Email","name","email","formControlName","email","autocomplete","off",1,"form-control","form-control-lg","form-control-solid",3,"ngClass"],[1,"mb-10","fv-row"],["type","password","placeholder","Password","name","password","formControlName","password","autocomplete","off",1,"form-control","form-control-lg","form-control-solid",3,"ngClass"],[1,"fv-row","mb-5"],["type","password","placeholder","Confirm password","name","cPassword","autocomplete","off","formControlName","cPassword",1,"form-control","form-control-lg","form-control-solid",3,"ngClass"],[1,"fv-row","mb-10"],[1,"form-check","form-check-custom","form-check-solid"],["id","kt_login_toc_agree","type","checkbox","formControlName","agree","name","agree",1,"form-check-input"],["for","kt_login_toc_agree",1,"form-check-label","fw-bold","text-gray-700","fs-6"],["href","https://keenthemes.com/metronic/?page=faq","target","_blank",1,"ms-1","link-primary"],[1,"text-center"],["type","submit","id","kt_sign_up_submit",1,"btn","btn-lg","btn-primary","w-100","mb-5",3,"disabled"],["routerLink","/auth/login","type","button","id","kt_login_signup_form_cancel_button",1,"btn","btn-lg","btn-light-primary","w-100","mb-5"],[1,"mb-lg-15","alert","alert-danger"],[1,"alert-text","font-weight-bold"],[1,"fv-plugins-message-container"],[1,"fv-help-block"],[1,"indicator-label"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],["role","alert"]],template:function(r,n){if(1&r){const i=e.RV6();e.j41(0,"form",1),e.bIt("ngSubmit",function(){return e.eBV(i),e.Njj(n.submit())}),e.j41(1,"div",2)(2,"h1",3),e.EFF(3,"Create an Account"),e.k0s(),e.j41(4,"div",4),e.EFF(5," Already have an account? "),e.j41(6,"a",5),e.EFF(7,"Sign in?"),e.k0s()()(),e.j41(8,"button",6),e.nrm(9,"img",7),e.EFF(10,"Sign in with Google "),e.k0s(),e.j41(11,"div",8),e.nrm(12,"div",9),e.j41(13,"span",10),e.EFF(14,"OR"),e.k0s(),e.nrm(15,"div",9),e.k0s(),e.DNE(16,Oe,4,0,"ng-container",11),e.j41(17,"div",12)(18,"label",13),e.EFF(19,"Fullname"),e.k0s(),e.nrm(20,"input",14),e.eu8(21,15)(22,15)(23,15),e.k0s(),e.j41(24,"div",16)(25,"label",13),e.EFF(26,"Email"),e.k0s(),e.nrm(27,"input",17),e.eu8(28,15)(29,15)(30,15)(31,15),e.k0s(),e.j41(32,"div",18)(33,"label",13),e.EFF(34,"Password"),e.k0s(),e.nrm(35,"input",19),e.eu8(36,15)(37,15)(38,15),e.k0s(),e.j41(39,"div",20)(40,"label",13),e.EFF(41,"Confirm Password"),e.k0s(),e.nrm(42,"input",21),e.eu8(43,15)(44,15)(45,15),e.DNE(46,Re,4,0,"ng-container",11),e.k0s(),e.j41(47,"div",22)(48,"div",23),e.nrm(49,"input",24),e.j41(50,"label",25),e.EFF(51," I Agree the\xa0"),e.j41(52,"a",26),e.EFF(53,"terms and conditions"),e.k0s(),e.EFF(54,". "),e.k0s()()(),e.j41(55,"div",27)(56,"button",28),e.DNE(57,Ie,3,0,"ng-container",11),e.nI1(58,"async"),e.DNE(59,Le,4,2,"ng-container",11),e.nI1(60,"async"),e.k0s(),e.j41(61,"a",29),e.EFF(62," Cancel "),e.k0s()()(),e.DNE(63,ye,1,1,"ng-template",null,0,e.C5r)}if(2&r){const i=e.sdS(64);e.Y8G("formGroup",n.registrationForm),e.R7$(6),e.xc7("margin-left","5px"),e.R7$(10),e.Y8G("ngIf",n.hasError),e.R7$(4),e.Y8G("ngClass",e.l_i(42,F,n.registrationForm.controls.fullname.invalid,n.registrationForm.controls.fullname.valid)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(45,ve,n.registrationForm.controls.fullname)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(47,be,n.registrationForm.controls.fullname)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(49,Se,n.registrationForm.controls.fullname)),e.R7$(4),e.Y8G("ngClass",e.l_i(51,F,n.registrationForm.controls.email.invalid,n.registrationForm.controls.email.valid)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(54,_e,n.registrationForm.controls.email)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(56,Fe,n.registrationForm.controls.email)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(58,we,n.registrationForm.controls.email)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(60,Ce,n.registrationForm.controls.email)),e.R7$(4),e.Y8G("ngClass",e.l_i(62,F,n.registrationForm.controls.password.invalid,n.registrationForm.controls.password.valid)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(65,ke,n.registrationForm.controls.password)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(67,Ae,n.registrationForm.controls.password)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(69,Te,n.registrationForm.controls.password)),e.R7$(4),e.Y8G("ngClass",e.l_i(71,F,n.registrationForm.controls.cPassword.invalid,n.registrationForm.controls.cPassword.valid)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(74,Ee,n.registrationForm.controls.cPassword)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(76,je,n.registrationForm.controls.cPassword)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(78,Ue,n.registrationForm.controls.cPassword)),e.R7$(),e.Y8G("ngIf",n.registrationForm.controls.cPassword.errors&&n.registrationForm.controls.cPassword.errors.ConfirmPassword),e.R7$(10),e.Y8G("disabled",n.registrationForm.invalid||!n.registrationForm.controls.agree.value),e.R7$(),e.Y8G("ngIf",!1===e.bMT(58,38,n.isLoading$)),e.R7$(2),e.Y8G("ngIf",e.bMT(60,40,n.isLoading$))}},dependencies:[c.YU,c.bT,c.T3,m.Wk,s.qT,s.me,s.Zm,s.BC,s.cb,s.j4,s.JD,c.Jj],styles:["[_nghost-%COMP%]{width:100%}@media (min-width: 992px){[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]{width:100%;max-width:450px}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}}"]})}return t})();const Me=(t,a)=>({"is-invalid":t,"is-valid":a}),Ge=t=>({validation:"required",message:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0627\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0645\u0637\u0644\u0648\u0628 ",control:t}),Pe=t=>({validation:"email",message:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0627\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u062e\u0637\u0640\u0623",control:t}),$e=t=>({validation:"minLength",message:"\u064a\u062c\u0628 \u0627\u0646 \u064a\u062d\u062a\u0648\u064a \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0627\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0639\u0644\u064a \u0631\u0645\u0648\u0632 \u0645\u062d\u062f\u062f\u0629",control:t}),Ye=t=>({validation:"maxLength",message:"\u064a\u062c\u0628 \u0627\u0646 \u064a\u0643\u0648\u0646 \u0637\u0648\u0644 \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0627\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0644\u0627 \u064a\u062a\u0639\u062f\u064a 300 \u062d\u0631\u0641 ",control:t});function Ne(t,a){1&t&&(e.qex(0),e.j41(1,"div",14)(2,"div",15),e.EFF(3," \u0646\u0623\u0633\u0641 , \u062d\u062f\u062b\u062a \u0646\u0641\u0633 \u0627\u0644\u0645\u0634\u0643\u0644\u0629 , \u0628\u0631\u062c\u0627\u0621 \u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 "),e.k0s()(),e.bVm())}function Be(t,a){1&t&&(e.qex(0),e.j41(1,"div",16)(2,"div",17),e.EFF(3," \u0644\u0642\u062f \u062a\u0645 \u0627\u0631\u0633\u0627\u0644 \u0643\u0645\u0644\u0629 \u0645\u0631\u0648\u0631 \u062c\u062f\u064a\u062f\u0629 , \u0628\u0631\u062c\u0627\u0621 \u062a\u0641\u0642\u062f \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0627\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0627\u0644\u062e\u0627\u0635 \u0628\u0643 "),e.k0s()(),e.bVm())}function Ve(t,a){1&t&&(e.qex(0),e.j41(1,"span",18),e.EFF(2," \u0627\u0646\u062a\u0638\u0631 \u0645\u0646 \u0641\u0636\u0644\u0643 .... "),e.nrm(3,"span",19),e.k0s(),e.bVm())}function qe(t,a){if(1&t&&(e.qex(0),e.j41(1,"div",20)(2,"div",21)(3,"span",22),e.EFF(4),e.k0s()()(),e.bVm()),2&t){const o=e.XpG().message;e.R7$(4),e.JRh(o)}}function Xe(t,a){if(1&t&&e.DNE(0,qe,5,1,"ng-container",5),2&t){const o=a.control;e.Y8G("ngIf",o.hasError(a.validation)&&(o.dirty||o.touched))}}var p=function(t){return t[t.NotSubmitted=0]="NotSubmitted",t[t.HasError=1]="HasError",t[t.NoError=2]="NoError",t}(p||{});const Ke=[{path:"",component:K,children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:he,data:{returnUrl:window.location.pathname}},{path:"registration",component:De},{path:"forgot-password",component:(()=>{class t{constructor(o,r){this.fb=o,this.authService=r,this.errorState=p.NotSubmitted,this.errorStates=p,this.unsubscribe=[],this.isLoading$=this.authService.isLoading$}ngOnInit(){this.initForm()}get f(){return this.forgotPasswordForm.controls}initForm(){this.forgotPasswordForm=this.fb.group({email:["",s.k0.compose([s.k0.required,s.k0.email,s.k0.minLength(3),s.k0.maxLength(320)])]})}submit(){this.errorState=p.NotSubmitted;const o=this.authService.forgotPassword(this.f.email.value).pipe((0,A.$)()).subscribe(r=>{this.errorState=r?p.NoError:p.HasError});this.unsubscribe.push(o)}static#e=this.\u0275fac=function(r){return new(r||t)(e.rXU(s.ok),e.rXU(_))};static#t=this.\u0275cmp=e.VBU({type:t,selectors:[["app-forgot-password"]],decls:26,vars:26,consts:[["formError",""],["novalidate","novalidate","id","kt_login_password_reset_form",1,"form","w-100","fv-plugins-bootstrap5","fv-plugins-framework",3,"ngSubmit","formGroup"],[1,"text-center","mb-10"],[1,"text-dark","mb-3"],[1,"text-gray-400","fw-bold","fs-4"],[4,"ngIf"],[1,"fv-row","mb-10"],[1,"form-label","fw-bolder","text-gray-900","fs-6"],["type","email","formControlName","email","placeholder","\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0627\u0644\u0643\u062a\u0631\u0648\u0646\u064a","name","email","autocomplete","off",1,"form-control","form-control-lg","form-control-solid",2,"direction","rtl",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"d-flex","flex-wrap","justify-content-center","pb-lg-0"],["type","submit","id","kt_password_reset_submit",1,"btn","btn-lg","btn-primary","fw-bolder","me-4"],[1,"indicator-label"],["routerLink","/auth/login","id","kt_login_password_reset_form_cancel_button",1,"btn","btn-lg","btn-light-primary","fw-bolder"],[1,"mb-lg-15","alert","alert-danger"],[1,"alert-text","font-weight-bold"],[1,"mb-10","bg-light-info","p-8","rounded"],[1,"text-info"],[1,"indicator-progress"],[1,"spinner-border","spinner-border-sm","align-middle","ms-2"],[1,"fv-plugins-message-container"],[1,"fv-help-block"],["role","alert"]],template:function(r,n){if(1&r){const i=e.RV6();e.j41(0,"form",1),e.bIt("ngSubmit",function(){return e.eBV(i),e.Njj(n.submit())}),e.j41(1,"div",2)(2,"h1",3),e.EFF(3," \u0646\u0633\u064a\u062a \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u061f "),e.k0s(),e.j41(4,"div",4),e.EFF(5," \u0627\u0643\u062a\u0628 \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0627\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0627\u0644\u062e\u0627\u0635 \u0628\u0643 , \u0627\u0644\u0645\u0633\u062c\u0644 \u0628\u0627\u0644\u0646\u0638\u0627\u0645 "),e.k0s()(),e.DNE(6,Ne,4,0,"ng-container",5)(7,Be,4,0,"ng-container",5),e.j41(8,"div",6)(9,"label",7),e.EFF(10,"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0627\u0644\u0643\u062a\u0631\u0648\u0646\u064a"),e.k0s(),e.nrm(11,"input",8),e.eu8(12,9)(13,9)(14,9)(15,9),e.k0s(),e.j41(16,"div",10)(17,"button",11)(18,"span",12),e.EFF(19,"\u0625\u0631\u0633\u0627\u0644 "),e.k0s(),e.DNE(20,Ve,4,0,"ng-container",5),e.nI1(21,"async"),e.k0s(),e.j41(22,"a",13),e.EFF(23," \u0631\u062c\u0640\u0640\u0648\u0639 "),e.k0s()()(),e.DNE(24,Xe,1,1,"ng-template",null,0,e.C5r)}if(2&r){const i=e.sdS(25);e.Y8G("formGroup",n.forgotPasswordForm),e.R7$(6),e.Y8G("ngIf",n.errorState===n.errorStates.HasError),e.R7$(),e.Y8G("ngIf",n.errorState===n.errorStates.NoError),e.R7$(4),e.Y8G("ngClass",e.l_i(15,Me,n.forgotPasswordForm.controls.email.invalid,n.forgotPasswordForm.controls.email.valid)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(18,Ge,n.forgotPasswordForm.controls.email)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(20,Pe,n.forgotPasswordForm.controls.email)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(22,$e,n.forgotPasswordForm.controls.email)),e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(24,Ye,n.forgotPasswordForm.controls.email)),e.R7$(5),e.Y8G("ngIf",e.bMT(21,13,n.isLoading$))}},dependencies:[c.YU,c.bT,c.T3,m.Wk,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,c.Jj],styles:["[_nghost-%COMP%]{width:100%}@media (min-width: 992px){[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]{width:100%;max-width:450px}[_nghost-%COMP%]   .login-form[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}}"]})}return t})()},{path:"logout",component:(()=>{class t{constructor(o){this.authService=o,this.authService.logout()}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||t)(e.rXU(_))};static#t=this.\u0275cmp=e.VBU({type:t,selectors:[["app-logout"]],decls:2,vars:0,template:function(r,n){1&r&&(e.j41(0,"p"),e.EFF(1,"logout works!"),e.k0s())}})}return t})()},{path:"",redirectTo:"login",pathMatch:"full"},{path:"**",redirectTo:"login",pathMatch:"full"}]}];let We=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=e.$C({type:t});static#o=this.\u0275inj=e.G2t({imports:[m.iI.forChild(Ke),m.iI]})}return t})();var ze=u(4130);let Qe=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=e.$C({type:t});static#o=this.\u0275inj=e.G2t({imports:[c.MD,ze.E,k.kr,We,s.YN,s.X1,C.q1]})}return t})()}}]);