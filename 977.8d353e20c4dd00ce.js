"use strict";(self.webpackChunkEKOWebUI=self.webpackChunkEKOWebUI||[]).push([[977],{9977:(Yt,M,l)=>{l.r(M),l.d(M,{MedicalTestsModule:()=>$t});var m=l(177),_=l(8742),f=l(7306),g=l(660),u=l(5487),v=l(9501),F=l(8130),t=l(4438),k=l(2450),I=l(9043),p=l(9417),L=l(5430);function D(i,r){if(1&i&&(t.j41(0,"caption"),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.SpI(" \u0628\u064a\u0627\u0646\u0627\u062a \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0623\u0633\u0639\u0627\u0631 | ",e.model.priceListName,"")}}function j(i,r){if(1&i){const e=t.RV6();t.j41(0,"tr")(1,"td",4),t.EFF(2,"\u0645\u0641\u0639\u0644 \u061f "),t.k0s(),t.j41(3,"td",4),t.EFF(4),t.k0s(),t.j41(5,"td",4)(6,"p-checkbox",13),t.mxI("ngModelChange",function(n){t.eBV(e);const s=t.XpG();return t.DH7(s.model.isActive,n)||(s.model.isActive=n),t.Njj(n)}),t.k0s()()()}if(2&i){const e=t.XpG();t.R7$(4),t.JRh(e.model.isActive?"\u0645\u0641\u0639\u0644":"\u063a\u064a\u0631 \u0645\u063a\u0639\u0644"),t.R7$(2),t.R50("ngModel",e.model.isActive),t.Y8G("disabled","delete"==e.mode)("binary",!0)}}function R(i,r){if(1&i){const e=t.RV6();t.j41(0,"tr")(1,"td",4),t.EFF(2," \u0627\u0644\u062a\u062d\u0627\u0644\u064a\u0644 \u0627\u0644\u0645\u062a\u0628\u0642\u0629 \u0645\u0646 \u0627\u0644\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0631\u0626\u064a\u0633\u0629 "),t.k0s(),t.j41(3,"td",4),t.EFF(4),t.k0s(),t.j41(5,"td",4)(6,"input",5),t.mxI("ngModelChange",function(n){t.eBV(e);const s=t.XpG();return t.DH7(s.model.remainingTests,n)||(s.model.remainingTests=n),t.Njj(n)}),t.k0s()()()}if(2&i){const e=t.XpG();t.R7$(4),t.JRh(e.model.remainingTests),t.R7$(2),t.R50("ngModel",e.model.remainingTests),t.Y8G("disabled",!0)}}function x(i,r){if(1&i){const e=t.RV6();t.j41(0,"a",14),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.updatePriceList())}),t.EFF(1," \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0642\u0627\u0626\u0645\u0629"),t.k0s()}}function A(i,r){if(1&i){const e=t.RV6();t.j41(0,"a",15),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.saveNewPriceList())}),t.EFF(1," \u062d\u0641\u0638 \u0627\u0644\u0642\u0627\u0626\u0645\u0629"),t.k0s()}}function w(i,r){if(1&i){const e=t.RV6();t.j41(0,"a",16),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.deletePriceList())}),t.EFF(1," \u062d\u0630\u0641 \u0627\u0644\u0642\u0627\u0626\u0645\u0629 \u0646\u0647\u0627\u0626\u064a\u0627"),t.k0s()}}function G(i,r){if(1&i){const e=t.RV6();t.j41(0,"a",15),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.addRemainingTests())}),t.EFF(1," \u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u062a\u062d\u0627\u0644\u064a\u0644 \u0627\u0644\u0645\u062a\u0628\u0642\u064a\u0629 "),t.k0s()}}function P(i,r){if(1&i){const e=t.RV6();t.j41(0,"a",17),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.rePriceTestsFromMainPriceList())}),t.EFF(1," \u0627\u0639\u0627\u062f\u0629 \u0627\u0644\u062a\u0633\u0639\u064a\u0631 \u0645\u0646 \u0627\u0644\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0631\u0626\u064a\u0633\u064a\u0629 "),t.k0s()}}let y=(()=>{class i{constructor(e,a,n,s,o){this.service=e,this.config=a,this.cdRef=n,this.cts=s,this.permissionManager=o,this.mode="add"}ngOnInit(){"add"==this.config.data.mode?(this.mode="add",this.model=new u.Rqi):"edit"==this.config.data.mode?(this.model=this.config.data.event,this.mode="edit"):"delete"==this.config.data.mode&&(this.model=this.config.data.event,this.mode="delete")}deletePriceList(){this.permissionManager.isNotGranted(F.e.CanRemoveVisit)?this.cts.sendToster("warn","\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629","\u0645\u062d\u0627\u0648\u0644\u0629 \u062d\u0630\u0641 \u0642\u0627\u0626\u0645\u0629 \u0623\u0633\u0639\u0627\u0631 ","\u0645\u062d\u0627\u0648\u0644\u0629 \u062d\u0630\u0641 \u0642\u0627\u0626\u0645\u0629 \u0623\u0633\u0639\u0627\u0631 "):this.service.deletePriceList(this.model.priceListId).subscribe({next:e=>{1==e&&(this.cts.sendToster("success","\u062d\u0630\u0641 \u0642\u0627\u0626\u0645\u0629 \u0623\u0633\u0639\u0627\u0631","\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0642\u0627\u0626\u0645\u0629 \u0628\u0646\u062c\u0627\u062d",`\u062d\u0630\u0641 \u0642\u0627\u0626\u0645\u0629 \u0627\u0633\u0639\u0627\u0631 \u0628\u0625\u0633\u0645 ${this.model.priceListName}  `),this.close())},error:e=>{}})}saveNewPriceList(){let e=new u.l16;e.isActive=this.model.isActive,e.mainPricePrecentage=this.model.mainPricePrecentage,e.priceListName=this.model.priceListName,this.service.createPriceList(e).subscribe({next:a=>{1==a&&(this.cts.sendToster("success","\u0625\u0636\u0627\u0641\u0629 \u0642\u0627\u0626\u0645\u0629 \u0623\u0633\u0639\u0627\u0631","\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0642\u0627\u0626\u0645\u0629 \u0628\u0646\u062c\u0627\u062d",`\u0625\u0636\u0627\u0641\u0629 \u0642\u0627\u0626\u0645\u0629 \u0627\u0633\u0639\u0627\u0631 \u0628\u0625\u0633\u0645 ${this.model.priceListName} \u0648 \u0628\u0646\u0633\u0628\u0647 \u062e\u0635\u0645 ${this.model.mainPricePrecentage}   `),this.close())},error:a=>{}})}updatePriceList(){let e=new u.QwG;e.isActive=this.model.isActive,e.mainPricePrecentage=this.model.mainPricePrecentage,e.priceListName=this.model.priceListName,e.priceListId=this.model.priceListId,this.service.updatePriceList(e).subscribe({next:a=>{1==a&&(this.cts.sendToster("success","\u062a\u0639\u062f\u064a\u0644 \u0642\u0627\u0626\u0645\u0629 \u0623\u0633\u0639\u0627\u0631","\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0642\u0627\u0626\u0645\u0629 \u0628\u0646\u062c\u0627\u062d",`\u062a\u0639\u062f\u064a\u0644 \u0642\u0627\u0626\u0645\u0629 \u0627\u0633\u0639\u0627\u0631 \u0628\u0625\u0633\u0645 ${this.model.priceListName} \u0648 \u0628\u0646\u0633\u0628\u0647 \u062e\u0635\u0645 ${this.model.mainPricePrecentage}   `),this.close())},error:a=>{}})}addRemainingTests(){this.service.updatePriceListByMainPriceList(this.model.priceListId).subscribe({next:e=>{this.cts.sendToster("success","\u062a\u0643\u0645\u0644\u0629 \u0627\u0644\u062a\u062d\u0627\u064a\u0644","\u062a\u0645 \u062a\u0643\u0645\u0644\u0629 \u0627\u0644\u062a\u062d\u0627\u0644\u064a\u0644 \u0644\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0623\u0633\u0639\u0627\u0631",`\u062a\u0643\u0645\u0644\u0629 \u0627\u0644\u062a\u062d\u0627\u0644\u064a\u0644 \u062d\u0633\u0628 \u0627\u0644\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0631\u0626\u0633\u064a\u0647 \u0644\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0623\u0633\u0639\u0627\u0631 ${this.model.priceListName}`),this.model.remainingTests=0,this.close()},error:e=>{}})}rePriceTestsFromMainPriceList(){this.service.updatePriceListPrecentageFromMainPriceID(this.model.priceListId,this.model.mainPricePrecentage).subscribe({next:e=>{this.cts.sendToster("success","\u0625\u0639\u0627\u062f\u0629 \u062a\u0633\u0639\u064a\u0631","\u062a\u0645 \u0625\u0639\u0627\u062f\u0629 \u062a\u0633\u0639\u064a\u0631 \u0627\u0644\u062a\u062d\u0627\u0644\u064a\u0644 \u0644\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0623\u0633\u0639\u0627\u0631",`\u0625\u0639\u0627\u062f\u0629 \u062a\u0633\u0639\u064a\u0631  \u062d\u0633\u0628 \u0627\u0644\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0631\u0626\u0633\u064a\u0647 \u0644\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0623\u0633\u0639\u0627\u0631 ${this.model.priceListName}`),this.close()},error:e=>{}})}close(){this.cdRef.detectChanges(),document.getElementsByClassName("pi-times")[0].click()}static#t=this.\u0275fac=function(a){return new(a||i)(t.rXU(u.Kje),t.rXU(g.sb),t.rXU(t.gRc),t.rXU(k.o),t.rXU(I.K))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-edit-price-list"]],decls:36,vars:14,consts:[[1,"table","table-sm"],[4,"ngIf"],[1,"table-active"],["scope","col"],["scope","row"],[1,"form-control",3,"ngModelChange","ngModel","disabled"],[1,"row"],[2,"direction","ltr"],["href","#",1,"btn","btn-light","btn-shadow","font-weight-bold","mx-2",3,"click"],["href","#","class","btn btn-primary btn-shadow font-weight-bold mx-2",3,"click",4,"ngIf"],["href","#","class","btn btn-success btn-shadow font-weight-bold mx-2",3,"click",4,"ngIf"],["href","#","class","btn btn-danger btn-shadow font-weight-bold mx-2",3,"click",4,"ngIf"],["href","#","class","btn btn-warning btn-shadow font-weight-bold mx-2",3,"click",4,"ngIf"],["inputId","binary3",3,"ngModelChange","ngModel","disabled","binary"],["href","#",1,"btn","btn-primary","btn-shadow","font-weight-bold","mx-2",3,"click"],["href","#",1,"btn","btn-success","btn-shadow","font-weight-bold","mx-2",3,"click"],["href","#",1,"btn","btn-danger","btn-shadow","font-weight-bold","mx-2",3,"click"],["href","#",1,"btn","btn-warning","btn-shadow","font-weight-bold","mx-2",3,"click"]],template:function(a,n){1&a&&(t.j41(0,"table",0),t.DNE(1,D,2,1,"caption",1),t.j41(2,"thead")(3,"tr",2)(4,"th",3),t.EFF(5,"\u0627\u0644\u0628\u064a\u0627\u0646"),t.k0s(),t.j41(6,"th",3),t.EFF(7,"\u0627\u0644\u0642\u0640\u064a\u0645\u0629"),t.k0s(),t.j41(8,"th",3),t.EFF(9," \u0627\u0644\u062a\u0639\u062f\u064a\u0644 "),t.k0s()()(),t.j41(10,"tbody")(11,"tr")(12,"td",4),t.EFF(13,"\u0627\u0644\u0623\u0633\u0640\u0640\u0645"),t.k0s(),t.j41(14,"td",4),t.EFF(15),t.k0s(),t.j41(16,"td",4)(17,"input",5),t.mxI("ngModelChange",function(o){return t.DH7(n.model.priceListName,o)||(n.model.priceListName=o),o}),t.k0s()()(),t.DNE(18,j,7,4,"tr",1),t.j41(19,"tr")(20,"td",4),t.EFF(21," \u0627\u0644\u0646\u0633\u0628\u0647 \u0645\u0646 \u0627\u0644\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0631\u0626\u064a\u0633\u064a\u0629 "),t.k0s(),t.j41(22,"td",4),t.EFF(23),t.k0s(),t.j41(24,"td",4)(25,"input",5),t.mxI("ngModelChange",function(o){return t.DH7(n.model.mainPricePrecentage,o)||(n.model.mainPricePrecentage=o),o}),t.k0s()()(),t.DNE(26,R,7,3,"tr",1),t.k0s()(),t.j41(27,"div",6)(28,"p",7)(29,"a",8),t.bIt("click",function(){return n.close()}),t.EFF(30," \u0625\u063a\u0644\u0627\u0642"),t.k0s(),t.DNE(31,x,2,0,"a",9)(32,A,2,0,"a",10)(33,w,2,0,"a",11)(34,G,2,0,"a",10)(35,P,2,0,"a",12),t.k0s()()),2&a&&(t.R7$(),t.Y8G("ngIf","edit"==n.mode),t.R7$(14),t.SpI(" ",n.model.priceListName," "),t.R7$(2),t.R50("ngModel",n.model.priceListName),t.Y8G("disabled","delete"==n.mode),t.R7$(),t.Y8G("ngIf","edit"==n.mode||"delete"==n.mode),t.R7$(5),t.JRh(n.model.mainPricePrecentage),t.R7$(2),t.R50("ngModel",n.model.mainPricePrecentage),t.Y8G("disabled","delete"==n.mode),t.R7$(),t.Y8G("ngIf","edit"==n.mode||"delete"==n.mode),t.R7$(5),t.Y8G("ngIf","edit"==n.mode),t.R7$(),t.Y8G("ngIf","add"==n.mode),t.R7$(),t.Y8G("ngIf","delete"==n.mode),t.R7$(),t.Y8G("ngIf","edit"==n.mode&&n.model.remainingTests),t.R7$(),t.Y8G("ngIf","edit"==n.mode))},dependencies:[m.bT,p.me,p.BC,p.vS,L.Sc]})}return i})();var C=l(9611),N=l(5779),h=l(4582),z=l(8542),V=l(1141),O=l(6296),S=l(5769),$=l(2242),X=l(9664),Y=l(2743);const U=()=>({"min-width":"75rem"}),H=()=>[10,25,50,100,150,200,250,300,500,1e3,2e3,3e3],J=()=>({"min-width":"200px"}),K=()=>({width:"150px"});function W(i,r){if(1&i){const e=t.RV6();t.j41(0,"p-multiSelect",15),t.mxI("ngModelChange",function(n){t.eBV(e);const s=t.XpG(2);return t.DH7(s.selectedColumns,n)||(s.selectedColumns=n),t.Njj(n)}),t.k0s()}if(2&i){const e=t.XpG(2);t.Aen(t.lJ4(4,J)),t.Y8G("options",e.cols),t.R50("ngModel",e.selectedColumns)}}function Z(i,r){if(1&i){const e=t.RV6();t.j41(0,"button",16),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.exportExcel())}),t.k0s()}}function Q(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",5),t.DNE(1,W,1,5,"p-multiSelect",6),t.j41(2,"span",7)(3,"div",8)(4,"span",9),t.qSk(),t.j41(5,"svg",10),t.nrm(6,"rect",11)(7,"path",12),t.k0s()(),t.joV(),t.j41(8,"input",13),t.bIt("input",function(n){t.eBV(e);const s=t.XpG(),o=t.sdS(1);return t.Njj(s.applyFilterGlobal(n,"contains",o))}),t.k0s()(),t.DNE(9,Z,1,0,"button",14),t.k0s()()}if(2&i){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.chooseColomns),t.R7$(8),t.Y8G("ngIf",e.downloadExcel)}}function q(i,r){1&i&&(t.j41(0,"th",23),t.nrm(1,"p-tableHeaderCheckbox"),t.k0s())}function tt(i,r){if(1&i&&(t.j41(0,"th",24),t.EFF(1),t.nrm(2,"p-sortIcon",25),t.k0s()),2&i){const e=r.$implicit;t.Y8G("pSortableColumn",e.field),t.R7$(),t.SpI(" ",e.header," "),t.R7$(),t.Y8G("field",e.field)}}function et(i,r){1&i&&t.nrm(0,"th",26)}function nt(i,r){1&i&&(t.j41(0,"th",23),t.nrm(1,"p-tableHeaderCheckbox"),t.k0s())}function it(i,r){if(1&i&&t.nrm(0,"p-columnFilter",28),2&i){const e=t.XpG(2).$implicit;t.FS9("field",e.field)}}function at(i,r){if(1&i&&(t.qex(0),t.DNE(1,it,1,1,"p-columnFilter",27),t.bVm()),2&i){const e=t.XpG().$implicit;t.R7$(),t.Y8G("ngIf",e.filtered)}}function st(i,r){if(1&i){const e=t.RV6();t.j41(0,"p-dropdown",32),t.bIt("onChange",function(n){t.eBV(e);const s=t.XpG(5);return t.Njj(s.filterActive(n))}),t.k0s()}if(2&i){const e=t.XpG(5);t.Aen(t.lJ4(3,K)),t.Y8G("options",e.allStatus)}}function ot(i,r){1&i&&(t.j41(0,"p-columnFilter",30),t.DNE(1,st,1,4,"ng-template",31),t.k0s()),2&i&&t.Y8G("showMenu",!1)}function rt(i,r){if(1&i&&(t.qex(0),t.DNE(1,ot,2,1,"p-columnFilter",29),t.bVm()),2&i){const e=t.XpG().$implicit;t.R7$(),t.Y8G("ngIf",e.filtered)}}function lt(i,r){if(1&i&&(t.j41(0,"th"),t.DNE(1,at,2,1,"ng-container",22)(2,rt,2,1,"ng-container",22),t.k0s()),2&i){const e=r.$implicit;t.R7$(),t.Y8G("ngIf","text"==e.type||"date"==e.type||"phonenumber"==e.type||"gender"==e.type||"lookup-category"==e.type),t.R7$(),t.Y8G("ngIf","active"==e.type)}}function ct(i,r){1&i&&t.nrm(0,"th")}function dt(i,r){if(1&i&&(t.j41(0,"tr",17),t.DNE(1,q,2,0,"th",18)(2,tt,3,3,"th",19)(3,et,1,0,"th",20),t.k0s(),t.j41(4,"tr",17),t.DNE(5,nt,2,0,"th",18)(6,lt,3,2,"th",21)(7,ct,1,0,"th",22),t.k0s()),2&i){const e=r.$implicit,a=r.$implicit,n=r.rowIndex,s=t.XpG();t.Y8G("pSelectableRow",e)("pSelectableRowIndex",n),t.R7$(),t.Y8G("ngIf",s.multipleSelectChechBox),t.R7$(),t.Y8G("ngForOf",a),t.R7$(),t.Y8G("ngIf",s.FirstBtn||s.SecondBtn||s.ThirdBtn),t.R7$(),t.Y8G("pSelectableRow",e)("pSelectableRowIndex",n),t.R7$(),t.Y8G("ngIf",s.multipleSelectChechBox),t.R7$(),t.Y8G("ngForOf",a),t.R7$(),t.Y8G("ngIf",s.FirstBtn||s.SecondBtn||s.ThirdBtn)}}function ut(i,r){if(1&i&&(t.j41(0,"td"),t.nrm(1,"p-tableCheckbox",33),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.Y8G("value",e)}}function pt(i,r){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit,a=t.XpG().$implicit,n=t.XpG();t.R7$(),t.SpI(" ",n.BindData(a,e)," ")}}function mt(i,r){if(1&i&&(t.j41(0,"span"),t.nrm(1,"app-mobile-phone",34),t.k0s()),2&i){const e=t.XpG().$implicit,a=t.XpG().$implicit,n=t.XpG();t.R7$(),t.Y8G("number",n.BindData(a,e))}}function ht(i,r){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit,a=t.XpG().$implicit,n=t.XpG();t.R7$(),t.SpI(" ",n.BindAge(a,e)," ")}}function _t(i,r){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit,a=t.XpG().$implicit,n=t.XpG();t.R7$(),t.SpI(" ",n.BindDate(a,e)," ")}}function ft(i,r){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit,a=t.XpG().$implicit,n=t.XpG();t.R7$(),t.SpI(" ",n.BindTime(a,e)," ")}}function gt(i,r){1&i&&(t.j41(0,"span",36),t.nrm(1,"i",37),t.k0s())}function bt(i,r){1&i&&(t.j41(0,"span",36),t.nrm(1,"i",38),t.k0s())}function Tt(i,r){if(1&i&&(t.j41(0,"span"),t.DNE(1,gt,2,0,"span",35)(2,bt,2,0,"span",35),t.k0s()),2&i){const e=t.XpG().$implicit,a=t.XpG().$implicit,n=t.XpG();t.R7$(),t.Y8G("ngIf",n.getBooleanValue(a,e.field)),t.R7$(),t.Y8G("ngIf",!n.getBooleanValue(a,e.field))}}function Ct(i,r){if(1&i&&(t.j41(0,"td"),t.DNE(1,pt,2,1,"span",22)(2,mt,2,1,"span",22)(3,ht,2,1,"span",22)(4,_t,2,1,"span",22)(5,ft,2,1,"span",22)(6,Tt,3,2,"span",22),t.k0s()),2&i){const e=r.$implicit;t.R7$(),t.Y8G("ngIf","text"==e.type),t.R7$(),t.Y8G("ngIf","phonenumber"==e.type),t.R7$(),t.Y8G("ngIf","age"==e.type),t.R7$(),t.Y8G("ngIf","date"==e.type),t.R7$(),t.Y8G("ngIf","time"==e.type),t.R7$(),t.Y8G("ngIf","bool"==e.type||"active"==e.type)}}function Ft(i,r){if(1&i){const e=t.RV6();t.j41(0,"a",41),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2).$implicit,s=t.XpG();return t.Njj(s.rowFirstClick(n))}),t.k0s()}if(2&i){const e=t.XpG(3);t.ZvI(" btn-xs bg-",e.classFirstBtn,""),t.Y8G("innerHTML",e.contentFirstBtn,t.npT)}}function yt(i,r){if(1&i){const e=t.RV6();t.j41(0,"a",41),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2).$implicit,s=t.XpG();return t.Njj(s.rowSecondClick(n))}),t.k0s()}if(2&i){const e=t.XpG(3);t.ZvI(" btn-xs bg-",e.classSecondBtn,""),t.Y8G("innerHTML",e.contentSecondBtn,t.npT)}}function St(i,r){if(1&i){const e=t.RV6();t.j41(0,"a",41),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2).$implicit,s=t.XpG();return t.Njj(s.rowThirdClick(n))}),t.k0s()}if(2&i){const e=t.XpG(3);t.ZvI(" btn-xs bg-",e.classThirdBtn,""),t.Y8G("innerHTML",e.contentThirdBtn,t.npT)}}function Bt(i,r){if(1&i&&(t.j41(0,"td")(1,"span",39),t.DNE(2,Ft,1,4,"a",40)(3,yt,1,4,"a",40)(4,St,1,4,"a",40),t.k0s()()),2&i){const e=t.XpG(2);t.R7$(2),t.Y8G("ngIf",e.FirstBtn),t.R7$(),t.Y8G("ngIf",e.SecondBtn),t.R7$(),t.Y8G("ngIf",e.ThirdBtn)}}function Mt(i,r){if(1&i&&(t.j41(0,"tr"),t.DNE(1,ut,2,1,"td",22)(2,Ct,7,6,"td",21)(3,Bt,5,3,"td",22),t.k0s()),2&i){const e=r.columns,a=t.XpG();t.R7$(),t.Y8G("ngIf",a.multipleSelectChechBox),t.R7$(),t.Y8G("ngForOf",e),t.R7$(),t.Y8G("ngIf",a.FirstBtn||a.SecondBtn||a.ThirdBtn)}}let E=(()=>{class i{constructor(){this.data=[],this.dataChange=new t.bkB,this.downloadExcel=!1,this.downloadExcelEvent=new t.bkB,this.totalRecordsChange=new t.bkB,this.lazyLoad=new t.bkB,this.lazyLoadChangeActive=new t.bkB,this.selectedRows=[],this.selectAll=!1,this.loading=!1,this.chooseColomns=!0,this.FirstBtn=!1,this.SecondBtn=!1,this.ThirdBtn=!1,this.classFirstBtn="danger",this.classSecondBtn="warning",this.classThirdBtn="info",this.contentFirstBtn="NULL",this.contentSecondBtn="NULL",this.contentThirdBtn="NULL",this.firstButtonEvent=new t.bkB,this.secondButtonEvent=new t.bkB,this.thirdButtonEvent=new t.bkB,this.multipleSelectChechBox=!1,this.allStatus=[],this.allStatus=[{id:1,name:"\u0646\u0639\u0645"},{id:2,name:"\u0644\u0627"}],this.data=[]}ngOnInit(){this.selectedColumns=this.cols.filter(e=>0==e.hidden)}lazyLoadVoid(e){this.lazyLoad.emit(e)}rowFirstClick(e){this.firstButtonEvent.emit(e)}rowSecondClick(e){this.secondButtonEvent.emit(e)}rowThirdClick(e){this.thirdButtonEvent.emit(e)}onSelectionChange(e=[]){this.selectAll=e.length===this.totalRecords,this.selectedRows=e}onSelectAllChange(e){e.checked?this.lazyLoad.emit(e):(this.selectedRows=[],this.selectAll=!1)}BindData(e,a,n=!1){return n?String(e[a.field]):String(e[a.field]).length>50?String(e[a.field]).substring(0,50)+"....":"null"==String(e[a.field])?"":String(e[a.field])}BindAge(e,a){let n;return n=String(e[a.field]).split(","),"Y"==n[1]?n[0]:"M"==n[1]?`${n[0]} \u0634\u0647\u0648\u0631`:"D"==n[1]?`${n[0]} \u064a\u0648\u0645`:void 0}BindDate(e,a){return new m.vh("EN").transform(e[a.field],"yyyy-MM-dd")}GetValue(e,a){return"null"==String(e[a])?"":String(e[a])}GetNumberValue(e,a){return null==Number(e[a])?null:Number(e[a])}getBooleanValue(e,a){return!0===e[a]||"number"==typeof e[a]&&e[a]>0}BindTime(e,a){let n=e[a.field];return n=n.toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/)||[n],n.length>1&&(n=n.slice(1),n[5]=+n[0]<12?" AM":" PM",n[0]=+n[0]%12||12),n.join("").replace(":00 PM"," PM").replace(":00 AM"," AM")}filterActive(e){console.log(e),this.lazyLoadChangeActive.emit(e)}applyFilterGlobal(e,a,n){n.filterGlobal(e.target.value,a)}exportExcel(){this.downloadExcelEvent.emit()}static#t=this.\u0275fac=function(a){return new(a||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-SharedLazyDataTable"]],inputs:{cols:"cols",data:"data",downloadExcel:"downloadExcel",totalRecords:"totalRecords",dataKey:"dataKey",chooseColomns:"chooseColomns",FirstBtn:"FirstBtn",SecondBtn:"SecondBtn",ThirdBtn:"ThirdBtn",classFirstBtn:"classFirstBtn",classSecondBtn:"classSecondBtn",classThirdBtn:"classThirdBtn",contentFirstBtn:"contentFirstBtn",contentSecondBtn:"contentSecondBtn",contentThirdBtn:"contentThirdBtn",multipleSelectChechBox:"multipleSelectChechBox"},outputs:{dataChange:"dataChange",downloadExcelEvent:"downloadExcelEvent",totalRecordsChange:"totalRecordsChange",lazyLoad:"lazyLoad",lazyLoadChangeActive:"lazyLoadChangeActive",firstButtonEvent:"firstButtonEvent",secondButtonEvent:"secondButtonEvent",thirdButtonEvent:"thirdButtonEvent"},decls:5,vars:15,consts:[["dt",""],["currentPageReportTemplate","\u0645\u0646 {first} \u0627\u0644\u064a  {last}  \u0645\u0646 \u0625\u062c\u0645\u0627\u0644\u064a {totalRecords}   ",3,"onLazyLoad","selectionChange","selectAllChange","value","lazy","tableStyle","selection","columns","selectAll","paginator","rows","totalRecords","loading","rowsPerPageOptions","showCurrentPageReport","dataKey"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex",2,"justify-content","space-between","display","flex"],["optionLabel","header","placeholder","Choose Columns","selectedItemsLabel","\u0639\u062f\u062f {0}  ",3,"options","ngModel","style","ngModelChange",4,"ngIf"],[2,"display","flex","flex-direction","row-reverse"],[1,"d-flex","align-items-center","position-relative","my-1","Mob-SearchDataTable"],[1,"svg-icon","svg-icon-1","position-absolute","ms-6"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["opacity","0.5","x","17.0365","y","15.1223","width","8.15546","height","2","rx","1","transform","rotate(45 17.0365 15.1223)","fill","black"],["d","M11 19C6.55556 19 3 15.4444 3 11C3 6.55556\n                                    6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19\n                                    15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5\n                                    7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667\n                                    17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z","fill","black"],["pInputText","","type","text","placeholder","\u0628\u062d\u0640\u062b..",1,"form-control","form-control","w-250px","ps-14","Mob-SearchDataTable",3,"input"],["type","button","pButton","","pRipple","","icon","pi pi-file-excel","class","p-button-success mx-2","pTooltip","XLS","tooltipPosition","bottom",3,"click",4,"ngIf"],["optionLabel","header","placeholder","Choose Columns","selectedItemsLabel","\u0639\u062f\u062f {0}  ",3,"ngModelChange","options","ngModel"],["type","button","pButton","","pRipple","","icon","pi pi-file-excel","pTooltip","XLS","tooltipPosition","bottom",1,"p-button-success","mx-2",3,"click"],[3,"pSelectableRow","pSelectableRowIndex"],["style","width: 4rem",4,"ngIf"],[3,"pSortableColumn",4,"ngFor","ngForOf"],["translate","Shared.Tools",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"width","4rem"],[3,"pSortableColumn"],[3,"field"],["translate","Shared.Tools"],["type","text",3,"field",4,"ngIf"],["type","text",3,"field"],["field","status","matchMode","equals",3,"showMenu",4,"ngIf"],["field","status","matchMode","equals",3,"showMenu"],["pTemplate","filter"],["styleClass","taj-font fc-primng ","optionLabel","name","name","status","optionValue","id",3,"onChange","options"],[3,"value"],[3,"number"],["class","",4,"ngIf"],[1,""],[1,"pi","pi-check",2,"color","#37ca00","border","1px solid","border-radius","5px","font-size","17px"],[1,"pi","pi-times",2,"color","#fe9b9b","border","1px solid","border-radius","5px","font-size","17px"],[1,"button-group"],[3,"innerHTML","class","click",4,"ngIf"],[3,"click","innerHTML"]],template:function(a,n){if(1&a){const s=t.RV6();t.j41(0,"p-table",1,0),t.bIt("onLazyLoad",function(c){return t.eBV(s),t.Njj(n.lazyLoadVoid(c))})("selectionChange",function(c){return t.eBV(s),t.Njj(n.onSelectionChange(c))})("selectAllChange",function(c){return t.eBV(s),t.Njj(n.onSelectAllChange(c))}),t.DNE(2,Q,10,2,"ng-template",2)(3,dt,8,10,"ng-template",3)(4,Mt,4,3,"ng-template",4),t.k0s()}2&a&&(t.FS9("dataKey",n.dataKey),t.Y8G("value",n.data)("lazy",!0)("tableStyle",t.lJ4(13,U))("selection",n.selectedRows)("columns",n.selectedColumns)("selectAll",n.selectAll)("paginator",!0)("rows",10)("totalRecords",n.totalRecords)("loading",n.loading)("rowsPerPageOptions",t.lJ4(14,H))("showCurrentPageReport",!0))},dependencies:[m.Sq,m.bT,N.Ei,h.XI,h.Tg,h.d5,h.yc,h.S9,h.nA,h.rl,z.m,V._f,O.KF,S.ms,p.BC,p.vS,$.S,X.Mm,Y.I],styles:[".button-group[_ngcontent-%COMP%]{display:inline-block}.button-group[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin-right:5px}"]})}return i})(),vt=(()=>{class i extends C.${constructor(e,a){super(a),this.dialogService=e,this.contentSecondBtnForFirstButton='<i class="pi pi-file-edit text-white"></i>',this.classForSecondButtonForSecondButton=" bg-info text-white",this.contentFirstBtnForFirstButton='<i class="pi pi-trash text-white"></i>',this.classForFirstButtonForFirstButton=" bg-danger text-white",this.isActive=!1,this.Cols=v.BA}ngOnInit(){this.radioButtonValue="ActiveOnly",this.isActive=!0}UpdateIsActive(){switch(this.radioButtonValue){case"All":this.isActive=void 0;break;case"ActiveOnly":this.isActive=!0;break;case"InActiveOnly":this.isActive=!1}}filterActive(e){this.isActive=1==e.value,this.Search(this.lastFilters)}Search(e){this.lastFilters=e;let a=new u.MPg;this.fillFiltrationModelFromEvent(a,e),a.isActive=this.isActive,this.service.getListOfPriceLists(a).subscribe({next:n=>{this.Data=n.items,this.totalRecords=n.items?.length??0,this.cdRef.detectChanges()},error:n=>{console.error(n)}})}edit(e){this.dialogService.open(y,{data:{mode:"edit",event:e},header:`\u062a\u0639\u062f\u064a\u0644  ( ${e.priceListName} ) `,width:"66%",maximizable:!0,resizable:!0,draggable:!0})}delete(e){this.permissionManager.isNotGranted(F.e.CanRemoveVisit)?this.cts.sendToster("warn","\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629","\u0645\u062d\u0627\u0648\u0644\u0629 \u062d\u0630\u0641 \u0642\u0627\u0626\u0645\u0629 \u0623\u0633\u0639\u0627\u0631  ","\u0645\u062d\u0627\u0648\u0644\u0629 \u062d\u0630\u0641 \u0642\u0627\u0626\u0645\u0629 \u0623\u0633\u0639\u0627\u0631  "):this.dialogService.open(y,{data:{mode:"delete",event:e},header:`\u062d\u0630\u0641  ( ${e.priceListName} ) `,width:"66%",maximizable:!0,resizable:!0,draggable:!0})}CreateNewPriceList(){this.dialogService.open(y,{data:{mode:"add"},header:"\u0625\u0636\u0640\u0627\u0641\u0629 \u0642\u0627\u0626\u0645\u0629 \u0623\u0633\u0639\u0627\u0631 \u062c\u062f\u064a\u062f\u0629",width:"66%",maximizable:!0,resizable:!0,draggable:!0})}static#t=this.\u0275fac=function(a){return new(a||i)(t.rXU(g.o3),t.rXU(t.zZn))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-price-list"]],features:[t.Jv_([g.o3]),t.Vt3],decls:11,vars:8,consts:[[1,"card","card-flush","shadow-sm"],[1,"card-header"],[1,"card-title"],[1,"card-toolbar"],[1,"btn","btn-primary",3,"click"],[1,"card-body","py-5"],[1,"row","m-7"],[3,"dataChange","totalRecordsChange","firstButtonEvent","lazyLoad","lazyLoadChangeActive","cols","data","dataKey","multipleSelectChechBox","totalRecords","FirstBtn","classFirstBtn","contentFirstBtn"]],template:function(a,n){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"h3",2),t.EFF(3," \u0642\u0648\u0627\u0626\u0645 \u0627\u0644\u0623\u0633\u0639\u0627\u0631 "),t.k0s(),t.j41(4,"div",3)(5,"a",4),t.bIt("click",function(){return n.CreateNewPriceList()}),t.EFF(6," \u0642\u0627\u0626\u0645\u0629 \u0623\u0633\u0639\u0627\u0631 \u062c\u062f\u064a\u062f\u0629 "),t.k0s()()(),t.j41(7,"div",5),t.nrm(8,"br"),t.j41(9,"div",6)(10,"app-SharedLazyDataTable",7),t.mxI("dataChange",function(o){return t.DH7(n.Data,o)||(n.Data=o),o})("totalRecordsChange",function(o){return t.DH7(n.totalRecords,o)||(n.totalRecords=o),o}),t.bIt("firstButtonEvent",function(o){return n.delete(o)})("lazyLoad",function(o){return n.Search(o)})("lazyLoadChangeActive",function(o){return n.filterActive(o)}),t.k0s()()()()),2&a&&(t.R7$(10),t.Y8G("cols",n.Cols),t.R50("data",n.Data),t.Y8G("dataKey","id")("multipleSelectChechBox",!0),t.R50("totalRecords",n.totalRecords),t.Y8G("FirstBtn",!0)("classFirstBtn",n.classForFirstButtonForFirstButton)("contentFirstBtn",n.contentFirstBtnForFirstButton))},dependencies:[E]})}return i})();var Lt=l(8032),B=l.n(Lt);let Et=(()=>{class i extends C.${constructor(e,a){super(a),this.dialogService=e,this.contentThirdBtnForThirdButton='<i class="pi pi-spin pi-cog text-white"></i>',this.classForThirdButtonForThirdButton=" bg-warning text-white",this.contentSecondBtnForSecondButton='<i class="pi pi-file-edit text-white"></i>',this.classForSecondButtonForSecondButton=" bg-info text-white",this.contentFirstBtnForFirstButton='<i class="pi pi-trash text-white"></i>',this.classForFirstButtonForFirstButton=" bg-danger text-white",this.currentParameterSearch=new u.MPg,this.Cols=v.IH}ngOnInit(){}filterActive(e){this.Search(this.lastFilters)}Search(e){this.lastFilters=e;let a=new u.MPg;this.fillFiltrationModelFromEvent(a,e),this.currentParameterSearch=a,this.service.getAllTests(a).subscribe({next:n=>{this.Data=n.items,this.totalRecords=n?.totalCount,this.cdRef.detectChanges()},error:n=>{console.error(n)}})}edit(e){this.router.navigate(["/MedicalTests/CreateOrEditMedicalTest"],{queryParams:{test:JSON.stringify(e)}})}config(e){this.router.navigate(["/MedicalTests/MedicalTestConfiguration"],{queryParams:{testId:e.id}})}delete(e){this.permissionManager.isNotGranted(F.e.CanRemoveVisit)?this.cts.sendToster("warn","\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629","\u0645\u062d\u0627\u0648\u0644\u0629 \u062d\u0630\u0641 \u0642\u0627\u0626\u0645\u0629 \u0623\u0633\u0639\u0627\u0631  ","\u0645\u062d\u0627\u0648\u0644\u0629 \u062d\u0630\u0641 \u0642\u0627\u0626\u0645\u0629 \u0623\u0633\u0639\u0627\u0631  "):B().fire({title:" \u0647\u0644 \u0627\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u0627\u0644\u062d\u0630\u0641 \u061f ",html:`\u0633\u064a\u062a\u0645 \u062d\u0630\u0641 ${e.testName}`,showDenyButton:!0,confirmButtonText:"\u0646\u0639\u0645",denyButtonText:"\u0644\u0627"}).then(a=>{a.isConfirmed?this.service.deleteTest(e.id).subscribe({next:n=>{501==n&&B().fire("\u062a\u062d\u0644\u064a\u0644 \u0644\u0627 \u064a\u0645\u0643\u0646 \u062d\u0630\u0641\u0629 ","\u0647\u0630\u0627 \u0627\u0644\u062a\u062d\u0644\u064a\u0644 \u0645\u0633\u062a\u062e\u062f\u0645 \u0645\u0646 \u0642\u0628\u0644 \u0628\u0639\u0636 \u0627\u0644\u0632\u064a\u0627\u0631\u0627\u062a , \u0644\u0627 \u064a\u0645\u0643\u0646 \u062d\u0630\u0641\u0647  \u064a\u0645\u0643\u0646 \u0627\u0644\u062a\u0639\u062f\u064a\u0644 \u0639\u0644\u064a\u0647 \u0641\u0642\u0637 ","info");const s=this.Data.indexOf(e);this.Data.splice(s,1),this.cdRef.detectChanges()}}):a.isDenied&&B().fire("\u062a\u0645 \u0627\u0644\u063a\u0627\u0621 \u0627\u0644\u0639\u0645\u0644\u064a\u0629","","info")})}downloadExcelEvent(){this.service.exportTests(this.currentParameterSearch).subscribe({next:e=>{this.downloadFromFileDto(e)}})}static#t=this.\u0275fac=function(a){return new(a||i)(t.rXU(g.o3),t.rXU(t.zZn))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-MedicalTest"]],features:[t.Jv_([g.o3]),t.Vt3],decls:11,vars:15,consts:[[1,"card","card-flush","shadow-sm"],[1,"card-header"],[1,"card-title"],[1,"card-toolbar"],["routerLink","/MedicalTests/CreateOrEditMedicalTest",1,"btn","btn-primary"],[1,"card-body","py-5"],[1,"row","m-7"],[3,"dataChange","totalRecordsChange","firstButtonEvent","secondButtonEvent","thirdButtonEvent","lazyLoad","lazyLoadChangeActive","downloadExcelEvent","cols","data","dataKey","multipleSelectChechBox","totalRecords","FirstBtn","classFirstBtn","contentFirstBtn","SecondBtn","classSecondBtn","contentSecondBtn","ThirdBtn","classThirdBtn","contentThirdBtn","downloadExcel"]],template:function(a,n){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"h3",2),t.EFF(3," \u0627\u0644\u062a\u062d\u0627\u0644\u064a\u0644 "),t.k0s(),t.j41(4,"div",3)(5,"a",4),t.EFF(6," \u062a\u062d\u0644\u064a\u0644 \u062c\u062f\u064a\u062f "),t.k0s()()(),t.j41(7,"div",5),t.nrm(8,"br"),t.j41(9,"div",6)(10,"app-SharedLazyDataTable",7),t.mxI("dataChange",function(o){return t.DH7(n.Data,o)||(n.Data=o),o})("totalRecordsChange",function(o){return t.DH7(n.totalRecords,o)||(n.totalRecords=o),o}),t.bIt("firstButtonEvent",function(o){return n.delete(o)})("secondButtonEvent",function(o){return n.edit(o)})("thirdButtonEvent",function(o){return n.config(o)})("lazyLoad",function(o){return n.Search(o)})("lazyLoadChangeActive",function(o){return n.filterActive(o)})("downloadExcelEvent",function(){return n.downloadExcelEvent()}),t.k0s()()()()),2&a&&(t.R7$(10),t.Y8G("cols",n.Cols),t.R50("data",n.Data),t.Y8G("dataKey","id")("multipleSelectChechBox",!0),t.R50("totalRecords",n.totalRecords),t.Y8G("FirstBtn",!0)("classFirstBtn",n.classForFirstButtonForFirstButton)("contentFirstBtn",n.contentFirstBtnForFirstButton)("SecondBtn",!0)("classSecondBtn",n.classForSecondButtonForSecondButton)("contentSecondBtn",n.contentSecondBtnForSecondButton)("ThirdBtn",!0)("classThirdBtn",n.classForThirdButtonForThirdButton)("contentThirdBtn",n.contentThirdBtnForThirdButton)("downloadExcel",!0))},dependencies:[E,_.Wk]})}return i})();function kt(i,r){if(1&i){const e=t.RV6();t.j41(0,"button",20),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.SaveOrUpdate(1))}),t.EFF(1," \u062d\u0641\u0638 \u0648 \u0625\u0636\u0627\u0641\u0629 \u062c\u062f\u064a\u062f "),t.nrm(2,"i",21),t.k0s()}}function It(i,r){if(1&i){const e=t.RV6();t.j41(0,"button",22),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.SaveOrUpdate(2))}),t.EFF(1," \u062d\u0641\u0638 \u0648 \u0631\u062c\u0648\u0639 \u0644\u0644\u0642\u0627\u0626\u0645\u0629 "),t.nrm(2,"i",21),t.k0s()}}function Dt(i,r){if(1&i){const e=t.RV6();t.j41(0,"button",22),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.SaveOrUpdate(3))}),t.EFF(1," \u062a\u0639\u062f\u064a\u0644 \u0648 \u0631\u062c\u0648\u0639 \u0644\u0644\u0642\u0627\u0626\u0645\u0629 "),t.nrm(2,"i",21),t.k0s()}}function jt(i,r){if(1&i){const e=t.RV6();t.j41(0,"button",22),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.SaveOrUpdate(4))}),t.EFF(1," \u062a\u0639\u062f\u064a\u0644 \u0648 \u0625\u0636\u0627\u0641\u0629 \u062c\u062f\u064a\u062f "),t.nrm(2,"i",21),t.k0s()}}let Rt=(()=>{class i extends C.${constructor(e){super(e),this.Mode="save",this.Model=new u.Aov}ngOnInit(){this.loadLookups(),this.CheckAddOrEdit()}CheckAddOrEdit(){this.activateRoute.queryParams.subscribe(e=>{if(e){var a=u.NA0.fromJS(JSON.parse(e.test));this.Mode="update",this.Model.id=a.id,this.Model.testName=a.testName,this.Model.testShortcutName=a.testShortcutName,this.Model.priceInMainPriceList=a.priceInMainPriceList,this.SelectedTestDepartmentId=a.testDepartmentId,this.SelectedTestVacutianersId=a.testVacutainerId,this.SelectedTestSampleTypesId=a.testSampleTypeId,this.cdRef.detectChanges()}})}loadLookups(){this.service.getAllTestDepartment().subscribe({next:e=>{this.TestDepartments=e,this.cdRef.detectChanges()}}),this.service.getAllTestSampleType().subscribe({next:e=>{this.TestSampleTypes=e,this.cdRef.detectChanges()}}),this.service.getAllVacutianer().subscribe({next:e=>{this.TestVacutianers=e,this.cdRef.detectChanges()}})}SaveOrUpdate(e){this.Model.testDepartmentId=this.SelectedTestDepartmentId,this.Model.testVacutainerId=this.SelectedTestVacutianersId,this.Model.testSampleTypeId=this.SelectedTestSampleTypesId,"update"==this.Mode&&0!=this.Model.id?this.Update(e):"save"==this.Mode&&this.Create(e)}Create(e){this.service.createTest(this.Model).subscribe({next:a=>{this.ExecutAction(e),this.cts.sendTosterWithoutLog("success","\u0639\u0645\u0644\u064a\u0629 \u0646\u0627\u062c\u062d\u0629","\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u062a\u062d\u0644\u064a\u0644 \u0628\u0646\u062c\u0627\u062d ")},error:a=>{console.log(a),this.cts.sendTosterWithoutLog("error","\u062d\u062f\u062b \u062e\u0637\u0623","\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u0625\u0636\u0627\u0641\u0629 \u062a\u062d\u0644\u064a\u0644 \u062c\u062f\u064a\u062f")}})}Update(e){this.service.updateTest(this.Model).subscribe({next:a=>{this.ExecutAction(e),this.cts.sendTosterWithoutLog("success","\u0639\u0645\u0644\u064a\u0629 \u0646\u0627\u062c\u062d\u0629","\u062a\u0645 \u0627\u0644\u062a\u0639\u062f\u064a\u0644 \u0628\u0646\u062c\u0627\u062d ")},error:a=>{console.log(a),this.cts.sendTosterWithoutLog("error","\u062d\u062f\u062b \u062e\u0637\u0623","\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062a\u0639\u062f\u064a\u0644 \u062a\u062d\u0644\u064a\u0644")}})}Clear(){this.Model=new u.Aov,this.SelectedTestDepartmentId=0,this.SelectedTestVacutianersId=0,this.SelectedTestSampleTypesId=0,this.Mode="save"}ExecutAction(e){switch(e){case 1:case 4:return void this.Clear();case 2:case 3:return void this.router.navigate(["/MedicalTests/MedicalTest"]);default:return}}static#t=this.\u0275fac=function(a){return new(a||i)(t.rXU(t.zZn))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-CreateOrEditMedicalTest"]],features:[t.Vt3],decls:53,vars:16,consts:[[1,"card","card-flush","shadow-sm"],[1,"card-header"],[1,"card-title"],[1,"card-toolbar"],["routerLink","/MedicalTests/MedicalTest",1,"btn","btn-primary"],[1,"card-body","py-5"],[1,"row"],[1,"col-md-4"],[1,"d-flex","flex-column","mb-8","fv-row"],[1,"d-flex","align-items-center","fs-6","fw-bold","mb-2"],[1,""],["type","text",1,"form-control",3,"ngModelChange","ngModel"],["styleClass"," taj-font fc-primng","placeholder","\u0627\u062e\u062a\u0631 \u0627\u0644\u0642\u0633\u0645","filterBy","name","optionLabel","name","optionValue","id",3,"ngModelChange","options","filter","ngModel"],["styleClass"," taj-font fc-primng","placeholder","\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u0639\u064a\u0646\u0629","filterBy","name","optionLabel","name","optionValue","id",3,"ngModelChange","options","filter","ngModel"],["styleClass"," taj-font fc-primng","placeholder","\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u0639\u0628\u0648\u0629","filterBy","name","optionLabel","name","optionValue","id",3,"ngModelChange","options","filter","ngModel"],["type","text","placeholder","\u0627\u062f\u062e\u0644 \u0633\u0639\u0631 \u0627\u0644\u062a\u062d\u0644\u064a\u0644",1,"form-control",3,"ngModelChange","ngModel"],[1,"row",2,"display","flex","justify-content","center"],[1,"col-md-5",2,"display","flex","justify-content","center"],["class","btn btn-light-success mx-3","style","margin-top: 30px;direction: ltr;width: 35%;",3,"click",4,"ngIf"],["class","btn btn-light-primary mx-3","style","margin-top: 30px;direction: ltr;width: 35%;",3,"click",4,"ngIf"],[1,"btn","btn-light-success","mx-3",2,"margin-top","30px","direction","ltr","width","35%",3,"click"],[1,"fa-solid","fa-floppy-disk"],[1,"btn","btn-light-primary","mx-3",2,"margin-top","30px","direction","ltr","width","35%",3,"click"]],template:function(a,n){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"h3",2),t.EFF(3," \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062a\u062d\u0644\u064a\u0644 "),t.k0s(),t.j41(4,"div",3)(5,"a",4),t.EFF(6," \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u062a\u062d\u0627\u0644\u064a\u0644 "),t.k0s()()(),t.j41(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"label",9)(12,"span",10),t.EFF(13," \u0625\u0633\u0645 \u0627\u0644\u062a\u062d\u0644\u064a\u0644 "),t.k0s()(),t.j41(14,"input",11),t.mxI("ngModelChange",function(o){return t.DH7(n.Model.testName,o)||(n.Model.testName=o),o}),t.k0s()()(),t.j41(15,"div",7)(16,"div",8)(17,"label",9)(18,"span",10),t.EFF(19,"\u0625\u0633\u0645 \u0627\u0644\u0645\u062e\u062a\u0635\u0631 "),t.k0s()(),t.j41(20,"input",11),t.mxI("ngModelChange",function(o){return t.DH7(n.Model.testShortcutName,o)||(n.Model.testShortcutName=o),o}),t.k0s()()()(),t.nrm(21,"br"),t.j41(22,"div",6)(23,"div",7)(24,"div",8)(25,"label",9)(26,"span",10),t.EFF(27,"\u0627\u0644\u0642\u0633\u0645"),t.k0s()(),t.j41(28,"p-dropdown",12),t.mxI("ngModelChange",function(o){return t.DH7(n.SelectedTestDepartmentId,o)||(n.SelectedTestDepartmentId=o),o}),t.k0s()()(),t.j41(29,"div",7)(30,"div",8)(31,"label",9)(32,"span",10),t.EFF(33,"\u0646\u0648\u0639 \u0627\u0644\u0639\u064a\u0646\u0647 "),t.k0s()(),t.j41(34,"p-dropdown",13),t.mxI("ngModelChange",function(o){return t.DH7(n.SelectedTestSampleTypesId,o)||(n.SelectedTestSampleTypesId=o),o}),t.k0s()()(),t.j41(35,"div",7)(36,"div",8)(37,"label",9)(38,"span",10),t.EFF(39,"\u0646\u0648\u0639 \u0627\u0644\u0639\u0628\u0648\u0629"),t.k0s()(),t.j41(40,"p-dropdown",14),t.mxI("ngModelChange",function(o){return t.DH7(n.SelectedTestVacutianersId,o)||(n.SelectedTestVacutianersId=o),o}),t.k0s()()(),t.j41(41,"div",7)(42,"div",8)(43,"label",9)(44,"span",10),t.EFF(45,"\u0633\u0639\u0631 \u0627\u0644\u062a\u062d\u0644\u064a\u0644"),t.k0s()(),t.j41(46,"input",15),t.mxI("ngModelChange",function(o){return t.DH7(n.Model.priceInMainPriceList,o)||(n.Model.priceInMainPriceList=o),o}),t.k0s()()()(),t.j41(47,"div",16)(48,"div",17),t.DNE(49,kt,3,0,"button",18)(50,It,3,0,"button",19)(51,Dt,3,0,"button",19)(52,jt,3,0,"button",19),t.k0s()()()()),2&a&&(t.R7$(14),t.R50("ngModel",n.Model.testName),t.R7$(6),t.R50("ngModel",n.Model.testShortcutName),t.R7$(8),t.Y8G("options",n.TestDepartments)("filter",!0),t.R50("ngModel",n.SelectedTestDepartmentId),t.R7$(6),t.Y8G("options",n.TestSampleTypes)("filter",!0),t.R50("ngModel",n.SelectedTestSampleTypesId),t.R7$(6),t.Y8G("options",n.TestVacutianers)("filter",!0),t.R50("ngModel",n.SelectedTestVacutianersId),t.R7$(6),t.R50("ngModel",n.Model.priceInMainPriceList),t.R7$(3),t.Y8G("ngIf","save"==n.Mode),t.R7$(),t.Y8G("ngIf","save"==n.Mode),t.R7$(),t.Y8G("ngIf","update"==n.Mode),t.R7$(),t.Y8G("ngIf","update"==n.Mode))},dependencies:[m.bT,p.me,p.BC,p.vS,_.Wk,S.ms]})}return i})();function xt(i,r){if(1&i){const e=t.RV6();t.j41(0,"tr")(1,"td")(2,"input",11),t.mxI("ngModelChange",function(n){const s=t.eBV(e).$implicit;return t.DH7(s.title,n)||(s.title=n),t.Njj(n)}),t.k0s()(),t.j41(3,"td")(4,"input",11),t.mxI("ngModelChange",function(n){const s=t.eBV(e).$implicit;return t.DH7(s.default,n)||(s.default=n),t.Njj(n)}),t.k0s()(),t.j41(5,"td")(6,"input",11),t.mxI("ngModelChange",function(n){const s=t.eBV(e).$implicit;return t.DH7(s.unit,n)||(s.unit=n),t.Njj(n)}),t.k0s()(),t.j41(7,"td")(8,"input",11),t.mxI("ngModelChange",function(n){const s=t.eBV(e).$implicit;return t.DH7(s.normal,n)||(s.normal=n),t.Njj(n)}),t.k0s()(),t.j41(9,"td")(10,"button",12),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.Delete(n))}),t.EFF(11," Delete "),t.k0s()()()}if(2&i){const e=r.$implicit;t.R7$(2),t.R50("ngModel",e.title),t.R7$(2),t.R50("ngModel",e.default),t.R7$(2),t.R50("ngModel",e.unit),t.R7$(2),t.R50("ngModel",e.normal)}}let At=(()=>{class i extends C.${constructor(e){super(e),this.injector=e,this.ArrayOfData=[],this.testConfig=new u.ch4,this.testId=0}ngOnInit(){this.CheckAddOrEdit()}CheckAddOrEdit(){this.activateRoute.queryParams.subscribe(e=>{if(e){let a=new u.OVA;a.testId=Number(e.testId),this.testId=Number(e.testId),this.service.getTestConfigTask(a).subscribe({next:n=>{this.testConfig=u.ch4.fromJS(n),this.testConfigObj=this.testConfig;for(let o in n){if(o.endsWith("Title")&&o.length<=8&&n[o]){let c=o.match(/\d+/),d=null;c&&c.length>0&&(d=parseInt(c[0])),this.ArrayOfData.push({number:d,key:o,title:n[o],default:"",unit:"",normal:""})}if(o.endsWith("Default")&&o.length<=11&&n[o]){let c=o.match(/\d+/),d=null;c&&c.length>0&&(d=parseInt(c[0]));var s=this.ArrayOfData.findIndex(b=>b.number==d);this.ArrayOfData[s].default=n[o]}if(o.startsWith("testNormal")&&n[o]){let c=o.match(/\d+/),d=null;c&&c.length>0&&(d=parseInt(c[0])),s=this.ArrayOfData.findIndex(T=>T.number==d),this.ArrayOfData[s].normal=n[o]}if(o.startsWith("testUnit")&&n[o]){let c=o.match(/\d+/),d=null;c&&c.length>0&&(d=parseInt(c[0])),s=this.ArrayOfData.findIndex(T=>T.number==d),this.ArrayOfData[s].unit=n[o]}}this.cdRef.detectChanges()}})}})}AddNew(){const e=this.ArrayOfData.reduce((a,n)=>Math.max(a,n.number),0);this.ArrayOfData.push({number:e+1,key:"r"+Number(e+1)+"Title",title:"",default:"",unit:"",normal:""})}Save(){var e=[];this.ArrayOfData.forEach(s=>{let o=s.key.match(/\d+/),c=null;o&&o.length>0&&(c=parseInt(o[0])),e.push(c),this.testConfigObj["r"+c+"Title"]=s.title,this.testConfigObj["r"+c+"Default"]=s.default,this.testConfigObj["testNormal"+c]=s.normal,this.testConfigObj["testUnit"+c]=s.unit});const a=[];for(let s=1;s<=30;s++)e.includes(s)||a.push(s);a.forEach(s=>{this.testConfigObj["r"+s+"Title"]=void 0,this.testConfigObj["r"+s+"Default"]=void 0,this.testConfigObj["testNormal"+s]=void 0,this.testConfigObj["testUnit"+s]=void 0});var n=JSON.stringify(this.testConfigObj);this.testConfig=u.ch4.fromJS(JSON.parse(n)),this.testConfig.testCode=this.testId,this.service.saveTestConfigTask(this.testConfig).subscribe({next:s=>{this.cts.sendTosterWithoutLog("success","\u0639\u0645\u0644\u064a\u0629 \u0646\u0627\u062c\u062d\u0629","\u062a\u0645 \u0627\u0644\u062d\u0641\u0638 \u0628\u0646\u062c\u0627\u062d")}})}Delete(e){var a=this.ArrayOfData.findIndex(n=>n.number==e.number);-1!==a&&this.ArrayOfData.splice(a,1)}static#t=this.\u0275fac=function(a){return new(a||i)(t.rXU(t.zZn))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-MedicalTestConfiguration"]],features:[t.Vt3],decls:31,vars:1,consts:[[1,"card","card-flush","shadow-sm"],[1,"card-header"],[1,"card-title"],[1,"card-toolbar"],["routerLink","/MedicalTests/MedicalTest",1,"btn","btn-primary"],[1,"card-body","py-5"],[1,"row","m-7"],[2,"direction","ltr"],[1,"table"],[4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"click"],[1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-danger",3,"click"]],template:function(a,n){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"h3",2),t.EFF(3," \u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u062a\u062d\u0644\u064a\u0644 "),t.k0s(),t.j41(4,"div",3)(5,"a",4),t.EFF(6," \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u062a\u062d\u0627\u0644\u064a\u0644 "),t.k0s()()(),t.j41(7,"div",5),t.nrm(8,"br"),t.j41(9,"div",6)(10,"div",7)(11,"table",8)(12,"thead")(13,"th"),t.EFF(14," Title "),t.k0s(),t.j41(15,"th"),t.EFF(16," Defualt "),t.k0s(),t.j41(17,"th"),t.EFF(18," Unit "),t.k0s(),t.j41(19,"th"),t.EFF(20," Normal "),t.j41(21,"small"),t.EFF(22,"(html)"),t.k0s()(),t.j41(23,"th"),t.EFF(24," Tools "),t.k0s()(),t.j41(25,"tbody"),t.DNE(26,xt,12,4,"tr",9),t.j41(27,"button",10),t.bIt("click",function(){return n.AddNew()}),t.EFF(28," Add New "),t.k0s()()()(),t.j41(29,"button",10),t.bIt("click",function(){return n.Save()}),t.EFF(30," Save "),t.k0s()()()()),2&a&&(t.R7$(26),t.Y8G("ngForOf",n.ArrayOfData))},dependencies:[m.Sq,p.me,p.BC,p.vS,_.Wk]})}return i})();var wt=l(6200);const Pt=[{path:"",redirectTo:"PriceLists",pathMatch:"full"},{path:"PriceLists",canActivate:[f._],component:vt,data:{animation:"PriceLists"}},{path:"MedicalTest",canActivate:[f._],component:Et,data:{animation:"MedicalTest"}},{path:"CreateOrEditMedicalTest",canActivate:[f._],component:Rt,data:{animation:"CreateOrEditMedicalTest"}},{path:"MedicalTestConfiguration",canActivate:[f._],component:At,data:{animation:"MedicalTestConfiguration"}},{path:"TestPriceSearch",canActivate:[f._],component:(()=>{class i{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(a){return new(a||i)};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-TestPriceSearch"]],decls:2,vars:0,consts:[[1,"win-mobile-test-price"]],template:function(a,n){1&a&&(t.j41(0,"div",0),t.nrm(1,"app-test-price-search"),t.k0s())},dependencies:[wt.N]})}return i})(),data:{animation:"MedicalTestConfiguration"}}];let Nt=(()=>{class i{static#t=this.\u0275fac=function(a){return new(a||i)};static#e=this.\u0275mod=t.$C({type:i});static#n=this.\u0275inj=t.G2t({imports:[_.iI.forChild(Pt),_.iI]})}return i})();var zt=l(9921),Vt=l(1631),Ot=l(494);let $t=(()=>{class i{static#t=this.\u0275fac=function(a){return new(a||i)};static#e=this.\u0275mod=t.$C({type:i});static#n=this.\u0275inj=t.G2t({imports:[m.MD,zt.G,p.YN,Vt.H_,L.q4,Ot.Ko,Nt,S.kr]})}return i})()}}]);